<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>K-Beauty Hospital - 로열티 앱</title>
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-gold: #D4AF37;
            --soft-gold: #F4E5C2;
            --light-gray: #F8F8F8;
            --medium-gray: #E5E5E5;
            --dark-gray: #333333;
            --white: #FFFFFF;
            --error: #E57373;
            --success: #81C784;
            --border-radius: 12px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --nav-height: 70px; /* Increased nav height for better visibility */
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%);
            color: var(--dark-gray);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        /* Phone Frame */
        .phone-frame {
            width: 390px;
            height: 844px;
            background: #1a1a1a;
            border-radius: 40px;
            padding: 10px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            position: relative;
        }

        .phone-screen {
            width: 100%;
            height: 100%;
            background: var(--white);
            border-radius: 30px;
            overflow: hidden;
            position: relative;
        }

        .phone-notch {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 30px;
            background: #1a1a1a;
            border-radius: 0 0 20px 20px;
            z-index: 101;
        }

        /* Typography */
        h1 {
            font-size: 1.5rem;
            font-weight: 400;
            letter-spacing: 0.3px;
            margin-bottom: 0.5rem;
        }

        h2 {
            font-size: 1.25rem;
            font-weight: 400;
            letter-spacing: 0.3px;
            margin-bottom: 0.5rem;
        }

        h3 {
            font-size: 1.125rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
        }

        p {
            font-size: 0.938rem;
            line-height: 1.5;
            color: #666;
        }

        /* SVG Icons */
        .icon {
            width: 24px;
            height: 24px;
            display: inline-block;
            vertical-align: middle;
        }

        .icon-small {
            width: 20px;
            height: 20px;
        }

        .icon-large {
            width: 32px;
            height: 32px;
        }

        /* App Container */
        .app-container {
            height: 100%;
            display: flex;
            flex-direction: column;
            background: var(--white);
            position: relative;
        }

        /* Header */
        .header {
            background: var(--white);
            padding: 2.5rem 1rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--medium-gray);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-logo {
            font-size: 1.25rem;
            font-weight: 300;
            letter-spacing: 2px;
            color: var(--primary-gold);
        }

        .header-actions {
            display: flex;
            gap: 1rem;
        }

        .icon-btn {
            background: none;
            border: none;
            padding: 0.5rem;
            cursor: pointer;
            color: var(--dark-gray);
            transition: var(--transition);
        }

        .icon-btn:hover {
            color: var(--primary-gold);
        }

        /* Main Content */
        .main-content {
            flex: 1;
            overflow-y: auto;
            padding-bottom: calc(var(--nav-height) + 10px);
        }

        /* Screens */
        .screen {
            display: none;
            animation: fadeIn 0.3s ease-out;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Home Screen */
        .welcome-section {
            background: linear-gradient(135deg, var(--soft-gold) 0%, var(--white) 100%);
            padding: 1rem 1.5rem;
            text-align: center;
            border-bottom: 1px solid var(--medium-gray);
        }
        
        .welcome-section h1 {
            font-size: 1.25rem;
            margin-bottom: 0.25rem;
        }
        
        .welcome-section p {
            font-size: 0.875rem;
        }

        .membership-card {
            background: linear-gradient(135deg, var(--primary-gold) 0%, #E5C767 100%);
            color: var(--white);
            padding: 1rem;
            border-radius: var(--border-radius);
            margin: 1rem;
            box-shadow: 0 4px 20px rgba(212, 175, 55, 0.3);
            position: relative;
            overflow: hidden;
            cursor: pointer;
            transition: var(--transition);
        }

        .membership-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(212, 175, 55, 0.4);
        }

        .membership-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .tier-badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.875rem;
            margin-top: 0.5rem;
        }

        .points-display {
            font-size: 2rem;
            font-weight: 300;
            margin: 0.5rem 0;
        }

        .progress-bar {
            background: rgba(255,255,255,0.3);
            height: 8px;
            border-radius: 4px;
            margin: 1rem 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--white);
            width: 70%;
            transition: width 1s ease-out;
        }

        .next-appointment-card {
            background: var(--white);
            border: 1px solid var(--primary-gold);
            border-radius: var(--border-radius);
            padding: 0.5rem 0.75rem;
            margin: 0 1rem 1rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            box-shadow: 0 2px 10px rgba(212, 175, 55, 0.15);
            cursor: pointer;
            transition: var(--transition);
        }

        .next-appointment-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.25);
        }

        .next-appointment-icon {
            background: var(--soft-gold);
            padding: 0.375rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .next-appointment-info {
            flex: 1;
        }

        .next-appointment-title {
            font-size: 0.75rem;
            color: #666;
            margin-bottom: 0.125rem;
        }

        .next-appointment-date {
            font-weight: 500;
            color: var(--primary-gold);
            font-size: 0.875rem;
        }

        /* Promotion Cards */
        .section-title {
            padding: 1rem 1rem 0.5rem;
            font-weight: 400;
            color: #666;
        }

        .promo-carousel {
            display: flex;
            overflow-x: auto;
            gap: 1rem;
            padding: 1rem;
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
        }

        .promo-carousel::-webkit-scrollbar {
            display: none;
        }

        .promo-card {
            flex: 0 0 85%;
            background: var(--white);
            border-radius: var(--border-radius);
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            overflow: hidden;
            scroll-snap-align: start;
            transition: var(--transition);
        }

        .promo-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.12);
        }

        .promo-image {
            width: 100%;
            height: 180px;
            background-size: cover;
            background-position: center;
        }

        .promo-content {
            padding: 1rem;
        }

        .promo-title {
            font-size: 1.125rem;
            margin-bottom: 0.5rem;
        }

        .promo-discount {
            color: var(--primary-gold);
            font-size: 1.25rem;
            font-weight: 500;
        }

        /* Quick Actions */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            padding: 1rem;
        }

        .quick-action-btn {
            background: var(--white);
            border: 1px solid var(--medium-gray);
            border-radius: var(--border-radius);
            padding: 1.5rem 0.5rem;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.875rem;
        }

        .quick-action-btn:hover {
            border-color: var(--primary-gold);
            box-shadow: 0 2px 10px rgba(212, 175, 55, 0.2);
        }

        .quick-action-icon {
            margin-bottom: 0.5rem;
            display: flex;
            justify-content: center;
        }

        /* Popular This Month */
        .popular-treatments {
            padding: 0 1rem 1rem;
        }

        .popular-treatment-card {
            background: var(--white);
            border-radius: var(--border-radius);
            padding: 1rem;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            cursor: pointer;
            transition: var(--transition);
            position: relative;
        }

        .popular-treatment-card:hover {
            transform: translateX(4px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.12);
        }

        .popular-rank {
            background: var(--primary-gold);
            color: var(--white);
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.875rem;
            flex-shrink: 0;
        }

        .popular-treatment-image {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            object-fit: cover;
            flex-shrink: 0;
        }

        .popular-treatment-info {
            flex: 1;
        }

        .popular-treatment-info h4 {
            font-size: 0.938rem;
            font-weight: 500;
            margin-bottom: 0.25rem;
        }

        .popular-treatment-stats {
            font-size: 0.75rem;
            color: #666;
        }

        .popular-treatment-price {
            font-weight: 500;
            color: var(--primary-gold);
            font-size: 0.938rem;
        }

        /* Treatments Screen */
        .treatments-filters {
            background: var(--white);
            padding: 1rem;
            border-bottom: 1px solid var(--medium-gray);
            display: flex;
            gap: 0.5rem;
            overflow-x: auto;
            position: sticky;
            top: 0;
            z-index: 50;
        }

        .filter-btn {
            padding: 0.5rem 1rem;
            border: 1px solid var(--medium-gray);
            border-radius: 20px;
            background: var(--white);
            font-size: 0.875rem;
            cursor: pointer;
            white-space: nowrap;
            transition: var(--transition);
        }

        .filter-btn:hover {
            border-color: var(--primary-gold);
        }

        .filter-btn.active {
            background: var(--primary-gold);
            color: var(--white);
            border-color: var(--primary-gold);
        }

        .treatment-grid {
            padding: 1rem;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        .treatment-card {
            background: var(--white);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .treatment-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.12);
        }

        .treatment-image {
            width: 100%;
            height: 120px;
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .treatment-badge {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: var(--primary-gold);
            color: var(--white);
            padding: 0.25rem 0.5rem;
            border-radius: 15px;
            font-size: 0.7rem;
            font-weight: 500;
        }

        .treatment-content {
            padding: 1rem;
            display: flex;
            flex-direction: column;
            flex: 1;
        }

        .treatment-title {
            font-size: 0.938rem;
            font-weight: 500;
            margin-bottom: 0.25rem;
        }

        .treatment-rating {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.75rem;
            color: #666;
            margin-bottom: 0.5rem;
        }

        .treatment-price {
            margin-bottom: 0.5rem;
        }

        .treatment-original-price {
            text-decoration: line-through;
            color: #999;
            font-size: 0.813rem;
            margin-right: 0.5rem;
        }

        .treatment-discount-price {
            color: var(--primary-gold);
            font-weight: 500;
            font-size: 1rem;
        }

        .treatment-detail {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.75rem;
            color: #666;
            margin-bottom: 0.75rem;
        }

        .treatment-info-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            margin-bottom: 0.5rem;
        }

        .treatment-content .btn-full {
            margin-top: auto;
        }

        .treatment-rating, .treatment-detail {
            margin-bottom: 0;
        }

        /* Appointments Screen */
        .appointment-tabs {
            display: flex;
            background: var(--white);
            border-bottom: 1px solid var(--medium-gray);
            position: sticky;
            top: 0;
            z-index: 50;
        }

        .tab-btn {
            flex: 1;
            padding: 1rem;
            border: none;
            background: none;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
        }

        .tab-btn.active {
            color: var(--primary-gold);
        }

        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--primary-gold);
        }

        .appointment-list {
            padding: 1rem;
        }

        .appointment-card {
            background: var(--white);
            border: 1px solid var(--medium-gray);
            border-radius: var(--border-radius);
            padding: 1.25rem;
            margin-bottom: 1rem;
            position: relative;
            transition: var(--transition);
        }

        .appointment-card:hover {
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        }

        .appointment-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 1rem;
        }

        .appointment-date {
            font-weight: 500;
            color: var(--primary-gold);
            font-size: 1.125rem;
            margin-bottom: 0.25rem;
        }

        .appointment-time {
            color: #666;
            font-size: 0.875rem;
        }

        .appointment-status {
            background: var(--soft-gold);
            color: var(--primary-gold);
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .appointment-details {
            display: grid;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .appointment-detail-row {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 0.875rem;
        }

        .appointment-reminder {
            background: var(--light-gray);
            padding: 0.75rem;
            border-radius: 8px;
            font-size: 0.875rem;
            color: #666;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .appointment-reminder-icon {
            color: var(--primary-gold);
        }

        .appointment-actions {
            display: flex;
            gap: 0.5rem;
        }

        /* Appointment Detail Screen */
        .appointment-detail-header {
            background: linear-gradient(135deg, var(--soft-gold) 0%, var(--white) 100%);
            padding: 1.5rem;
            text-align: center;
            border-bottom: 1px solid var(--medium-gray);
        }

        .detail-section {
            background: var(--white);
            margin: 1rem;
            border-radius: var(--border-radius);
            padding: 1.25rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .detail-section h3 {
            color: var(--primary-gold);
            margin-bottom: 1rem;
            font-size: 1rem;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--light-gray);
        }

        .detail-row:last-child {
            border-bottom: none;
        }

        .detail-label {
            color: #666;
            font-size: 0.875rem;
        }

        .detail-value {
            font-weight: 500;
            font-size: 0.875rem;
            text-align: right;
        }


        /* Chat Screen */
        .chat-container {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .chat-header {
            background: var(--white);
            padding: 1rem;
            border-bottom: 1px solid var(--medium-gray);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .chat-avatar {
            width: 40px;
            height: 40px;
            background: var(--soft-gold);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .chat-status {
            font-size: 0.875rem;
            color: #4CAF50;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            background: #FAFAFA;
            padding-bottom: 80px; /* Space for input container */
        }

        .message {
            margin-bottom: 1rem;
            animation: messageSlide 0.3s ease-out;
        }

        @keyframes messageSlide {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message-bot {
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
        }

        .message-user {
            display: flex;
            justify-content: flex-end;
        }

        .message-bubble {
            max-width: 80%;
            padding: 0.75rem 1rem;
            border-radius: 18px;
            font-size: 0.938rem;
            line-height: 1.4;
        }

        .message-bot .message-bubble {
            background: var(--white);
            color: var(--dark-gray);
            border-bottom-left-radius: 4px;
        }

        .message-user .message-bubble {
            background: var(--primary-gold);
            color: var(--white);
            border-bottom-right-radius: 4px;
        }

        .quick-replies {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.5rem;
            flex-wrap: wrap;
        }

        .quick-reply-btn {
            padding: 0.5rem 1rem;
            background: var(--white);
            border: 1px solid var(--primary-gold);
            color: var(--primary-gold);
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.875rem;
            transition: var(--transition);
        }

        .quick-reply-btn:hover {
            background: var(--primary-gold);
            color: var(--white);
        }

            transition: var(--transition);
        }

        .chat-send-btn:hover {
            background: #C19F30;
        }

        /* Profile Screen */
        .profile-header {
            background: linear-gradient(135deg, var(--soft-gold) 0%, var(--white) 100%);
            padding: 2rem;
            text-align: center;
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            background: var(--primary-gold);
            border-radius: 50%;
            margin: 0 auto 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: var(--white);
        }

        .settings-list {
            background: var(--white);
            margin: 1rem;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .settings-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 1.25rem;
            border-bottom: 1px solid var(--light-gray);
            cursor: pointer;
            transition: var(--transition);
        }

        .settings-item:last-child {
            border-bottom: none;
        }

        .settings-item:hover {
            background: var(--light-gray);
        }

        .settings-item-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .settings-icon {
            color: var(--primary-gold);
        }

        /* Currency Buttons */
        .currency-btn {
            background: var(--white);
            border: 1px solid var(--medium-gray);
            border-radius: var(--border-radius);
            padding: 1rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
        }
        
        .currency-btn:hover {
            border-color: var(--primary-gold);
        }
        
        .currency-btn.active {
            border-color: var(--primary-gold);
            background: var(--soft-gold);
        }
        
        /* Switch Toggle */
        .switch {
            position: relative;
            display: inline-block;
            width: 44px;
            height: 24px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: var(--primary-gold);
        }
        
        input:checked + .slider:before {
            transform: translateX(20px);
        }

        /* Bottom Navigation */
        .bottom-nav {
            background: var(--white);
            border-top: 1px solid var(--medium-gray);
            display: flex;
            justify-content: space-around;
            align-items: flex-start;
            padding: 0.5rem 0 1.5rem 0;
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 100;
            height: var(--nav-height);
            border-radius: 0 0 30px 30px;
        }

        .nav-item {
            flex: 1;
            text-align: center;
            padding: 0.5rem;
            cursor: pointer;
            transition: var(--transition);
            color: #999;
        }

        .nav-item.active {
            color: var(--primary-gold);
        }

        .nav-icon {
            margin-bottom: 0.25rem;
            display: flex;
            justify-content: center;
        }

        .nav-label {
            font-size: 0.75rem;
        }

        /* Buttons */
        .btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.875rem;
            transition: var(--transition);
        }

        .btn-primary {
            background: var(--primary-gold);
            color: var(--white);
        }

        .btn-primary:hover {
            background: #C19F30;
        }

        .btn-secondary {
            background: var(--medium-gray);
            color: var(--dark-gray);
        }

        .btn-secondary:hover {
            background: #D0D0D0;
        }

        .btn-full {
            width: 100%;
        }


        /* Language Selector Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            animation: fadeIn 0.3s ease-out;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: var(--white);
            border-radius: var(--border-radius);
            padding: 2rem;
            max-width: 90%;
            width: 350px;
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
            from {
                transform: translateY(20px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .language-options {
            margin-top: 1.5rem;
        }

        .language-option {
            display: block;
            width: 100%;
            padding: 1rem;
            margin-bottom: 0.75rem;
            border: 1px solid var(--medium-gray);
            border-radius: 8px;
            background: var(--white);
            cursor: pointer;
            transition: var(--transition);
            font-size: 1rem;
        }

        .language-option:hover {
            border-color: var(--primary-gold);
            background: var(--light-gray);
        }

        .language-option.selected {
            border-color: var(--primary-gold);
            background: var(--soft-gold);
        }

        /* Floating Chat Button */
        .fab-chat {
            position: absolute;
            bottom: calc(var(--nav-height) + 20px);
            right: 20px;
            width: 56px;
            height: 56px;
            background: var(--primary-gold);
            color: var(--white);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(212, 175, 55, 0.4);
            cursor: pointer;
            transition: var(--transition);
            z-index: 90;
        }

        .fab-chat:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(212, 175, 55, 0.5);
        }

        .fab-chat.hidden {
            display: none;
        }

        /* Star Rating */
        .star {
            fill: #FFD700;
        }

        .star-empty {
            fill: #E0E0E0;
        }

        /* Add padding to screens with scrollable content */
        #reschedule-screen .main-content {
            padding-bottom: calc(var(--nav-height) + 80px); /* Extra space for fixed bottom buttons */
        }

        /* Responsive */
        @media (max-width: 430px) {
            body {
                padding: 0;
            }
            
            .phone-frame {
                width: 100%;
                height: 100vh;
                border-radius: 0;
                padding: 0;
            }
            
            .phone-screen {
                border-radius: 0;
            }
            
            .phone-notch {
                display: none;
            }
            
            .header {
                padding-top: 1rem;
            }
            
            /* Adjust fixed elements for mobile */
            #chat-screen.active .chat-input-container {
                width: 100%;
            }
            
            .treatment-detail-fixed-bottom {
                width: 100%;
            }
            
            #reschedule-screen .reschedule-fixed-bottom {
                width: 100%;
            }
        }

        /* Chat Input Container */
        .chat-input-container {
            display: none !important;
        }

        #chat-screen.active .chat-input-container {
            position: absolute;
            bottom: var(--nav-height);
            left: 0;
            right: 0;
            background: var(--white);
            border-top: 1px solid var(--medium-gray);
            padding: 0.75rem;
            display: flex !important;
            gap: 0.5rem;
            align-items: center;
            z-index: 99;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
        }
        
        /* Ensure chat elements are only visible on chat screen */
        .chat-container,
        .chat-messages,
        .chat-header {
            display: none;
        }
        
        #chat-screen.active .chat-container {
            display: flex;
        }
        
        #chat-screen.active .chat-messages {
            display: block;
        }
        
        #chat-screen.active .chat-header {
            display: flex;
        }

        .chat-input-field {
            flex: 1;
            padding: 0.75rem;
            border: 1px solid var(--medium-gray);
            border-radius: 24px;
            font-size: 0.938rem;
            outline: none;
            transition: var(--transition);
        }

        .chat-input-field:focus {
            border-color: var(--primary-gold);
        }

        .chat-input-btn {
            background: none;
            border: none;
            padding: 0.5rem;
            cursor: pointer;
            color: var(--dark-gray);
            transition: var(--transition);
        }

        .chat-input-btn:hover {
            color: var(--primary-gold);
        }

        .chat-input-btn.send {
            background: var(--primary-gold);
            color: var(--white);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Treatment Detail Fixed Bottom */
        .treatment-detail-fixed-bottom {
            position: fixed;
            bottom: var(--nav-height);
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: var(--max-width);
            background: var(--white);
            border-top: 1px solid var(--medium-gray);
            padding: 1rem;
            z-index: 101;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
            opacity: 1 !important;
            animation: none !important;
            display: block !important;
            visibility: visible !important;
            transition: none !important;
            will-change: transform;
        }
        
        #treatment-detail-screen.active .treatment-detail-fixed-bottom {
            opacity: 1 !important;
            visibility: visible !important;
            display: block !important;
        }

        .book-now-btn {
            width: 100%;
            padding: 1rem;
            background: var(--primary-gold);
            color: var(--white);
            border: none;
            border-radius: var(--border-radius);
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .book-now-btn:hover {
            background: #B8941F;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(212, 175, 55, 0.3);
        }

        /* Referral Widget Styles */
        .referral-widget {
            background: linear-gradient(135deg, #FFFBF0 0%, #FFF8E7 100%);
            border: 1px solid var(--soft-gold);
            border-radius: 16px;
            padding: 1.25rem;
            margin: 1.5rem 0;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(212, 175, 55, 0.1);
        }

        .referral-widget:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(212, 175, 55, 0.15);
        }

        .referral-widget-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .referral-widget-left {
            display: flex;
            align-items: center;
            gap: 0.875rem;
        }

        .referral-widget-icon {
            background: var(--white);
            border-radius: 12px;
            padding: 0.625rem;
            display: flex;
            box-shadow: 0 2px 6px rgba(0,0,0,0.08);
        }

        .referral-widget-icon svg {
            width: 1.5rem;
            height: 1.5rem;
        }

        .referral-widget-text {
            flex: 1;
        }

        .referral-widget-title {
            color: var(--dark-gray);
            margin: 0;
            font-size: 1rem;
            font-weight: 600;
        }

        .referral-widget-subtitle {
            color: #666;
            margin: 0.25rem 0 0 0;
            font-size: 0.875rem;
        }

        .referral-share-btn {
            background: var(--primary-gold);
            color: white;
            border: none;
            border-radius: 10px;
            padding: 0.625rem 1.125rem;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.2s;
        }

        .referral-share-btn:hover {
            background: #B8941F;
            transform: scale(1.05);
        }

        .referral-share-btn svg {
            width: 1.125rem;
            height: 1.125rem;
        }

        .referral-widget-progress {
            margin-top: 0.75rem;
        }

        .referral-progress-bar {
            background: rgba(0,0,0,0.08);
            border-radius: 8px;
            height: 6px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }

        .referral-progress-fill {
            background: var(--primary-gold);
            height: 100%;
            border-radius: 8px;
            transition: width 0.3s ease;
        }

        .referral-progress-text {
            color: #666;
            font-size: 0.813rem;
            margin: 0;
            text-align: center;
        }

        /* Back Button */
        .back-button {
            position: absolute;
            top: 2.5rem;
            left: 1rem;
            background: var(--white);
            border: none;
            padding: 0.5rem;
            cursor: pointer;
            color: var(--dark-gray);
            transition: var(--transition);
            z-index: 102;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .back-button:hover {
            color: var(--primary-gold);
        }

        /* Screen with back button */
        .screen-with-back .header {
            padding-left: 3rem;
        }

        /* Reschedule Module */
        #reschedule-screen {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--white);
            z-index: 150;
            display: none;
            flex-direction: column;
            height: 100%;
            overflow: hidden;
        }

        #reschedule-screen.active {
            display: flex;
        }

        .reschedule-header {
            background: var(--white);
            padding: 3.5rem 1rem 1rem;
            border-bottom: 1px solid var(--medium-gray);
            position: relative;
            text-align: center;
        }
        
        .reschedule-header h2 {
            margin-bottom: 0.25rem;
            margin-left: 40px; /* Add left margin to avoid overlap with back button */
            margin-right: 40px;
        }
        
        .reschedule-header p {
            font-size: 0.875rem;
            color: #666;
            margin: 0;
        }

        .reschedule-content {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
        }

        .reschedule-fixed-bottom {
            position: sticky;
            bottom: 0;
            background: var(--white);
            border-top: 1px solid var(--medium-gray);
            padding: 1rem;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
        }

        .calendar-container {
            background: var(--light-gray);
            border-radius: var(--border-radius);
            padding: 1rem;
            margin-bottom: 1.5rem;
        }

        .calendar-header {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 0.5rem;
            margin-bottom: 0.75rem;
            text-align: center;
        }

        .calendar-day {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--dark-gray);
            padding: 0.5rem 0;
        }

        .calendar-day.weekend {
            color: var(--error);
        }

        .date-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 0.5rem;
        }

        .date-item {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            background: var(--white);
            border: 2px solid transparent;
            border-radius: 12px;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
        }

        .date-item:hover:not(.disabled) {
            border-color: var(--primary-gold);
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(212, 175, 55, 0.2);
        }

        .date-item.selected {
            background: var(--primary-gold);
            color: var(--white);
            border-color: var(--primary-gold);
            font-weight: 600;
        }

        .date-item.disabled {
            opacity: 0.4;
            cursor: not-allowed;
            background: var(--medium-gray);
        }

        .date-item.today {
            border-color: var(--primary-gold);
            font-weight: 600;
        }

        .date-item.today::after {
            content: '';
            position: absolute;
            bottom: 4px;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 4px;
            background: var(--primary-gold);
            border-radius: 50%;
        }

        .date-item.selected.today::after {
            background: var(--white);
        }

        .date-number {
            font-size: 1rem;
            font-weight: 500;
            line-height: 1.2;
        }

        .date-month {
            font-size: 0.625rem;
            opacity: 0.7;
            margin-top: 2px;
        }

        .calendar-month-nav {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
            padding: 0 0.5rem;
        }

        .month-nav-btn {
            background: none;
            border: none;
            padding: 0.5rem;
            cursor: pointer;
            color: var(--dark-gray);
            border-radius: 8px;
            transition: var(--transition);
        }

        .month-nav-btn:hover {
            background: var(--white);
            color: var(--primary-gold);
        }

        #current-month {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--dark-gray);
            margin: 0;
        }

        .time-slots {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.75rem;
            margin-bottom: 2rem;
        }

        .time-slot {
            padding: 0.75rem;
            text-align: center;
            border: 1px solid var(--medium-gray);
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
        }

        .time-slot:hover {
            border-color: var(--primary-gold);
        }

        .time-slot.selected {
            background: var(--primary-gold);
            color: var(--white);
            border-color: var(--primary-gold);
        }

        .time-slot.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Adjust screen padding for sticky elements */
        #chat-screen .chat-messages {
            padding-bottom: calc(var(--nav-height) + 80px);
        }

        #treatment-detail-screen .screen-content {
            padding-bottom: calc(var(--nav-height) + 80px);
        }
        
        #treatment-detail-screen {
            position: relative;
        }

        /* Treatment Detail Header */
        .treatment-detail-header {
            position: relative;
        }

        /* Form Select */
        .form-select {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid var(--medium-gray);
            border-radius: var(--border-radius);
            background: var(--white);
            font-size: 0.938rem;
            color: var(--dark-gray);
            cursor: pointer;
            transition: var(--transition);
        }

        .form-select:focus {
            outline: none;
            border-color: var(--primary-gold);
        }
    </style>
</head>
<body>
    <div class="phone-frame">
        <div class="phone-screen">
            <div class="phone-notch"></div>
            <div class="app-container">
                <!-- Header -->
                <header class="header">
                    <div class="header-logo">K-BEAUTY</div>
                    <div class="header-actions">
                        <button class="icon-btn" onclick="showLanguageModal()">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <path d="M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
                            </svg>
                        </button>
                        <button class="icon-btn" onclick="showScreen('notification-screen')">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                                <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                            </svg>
                        </button>
                    </div>
                </header>

                <!-- Main Content -->
                <main class="main-content">
                    <!-- Home Screen -->
                    <div id="home-screen" class="screen active">
                        <div class="welcome-section">
                            <h1 id="welcome-text">다시 오신 것을 환영합니다, Sarah님!</h1>
                            <p id="journey-text">당신의 뷰티 여정이 계속됩니다</p>
                        </div>

                        <div class="membership-card" onclick="showScreen('rewards-screen')">
                            <h3 id="gold-member-text">골드 회원</h3>
                            <div class="points-display">2,500 <span id="points-text">포인트</span></div>
                            <div class="progress-bar">
                                <div class="progress-fill"></div>
                            </div>
                            <div style="background: rgba(255,255,255,0.2); padding: 0.5rem; border-radius: 6px; margin-top: 0.5rem; text-align: center;">
                                <p style="margin: 0; font-size: 0.875rem; font-weight: 500; color: white;"><span id="points-to-next">플래티넘까지 500 포인트</span></p>
                                <p style="margin: 0; font-size: 0.75rem; opacity: 0.9; color: white;">다음 등급 혜택: VIP 할인 25%</p>
                            </div>
                        </div>

                        <div class="next-appointment-card" onclick="showAppointmentDetail('botox2')">
                            <div class="next-appointment-icon">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                    <line x1="16" y1="2" x2="16" y2="6"></line>
                                    <line x1="8" y1="2" x2="8" y2="6"></line>
                                    <line x1="3" y1="10" x2="21" y2="10"></line>
                                </svg>
                            </div>
                            <div class="next-appointment-info">
                                <div class="next-appointment-title" id="next-appointment-label">다음 예약</div>
                                <div class="next-appointment-date" id="tomorrow-text">내일, 오후 3:00</div>
                                <div style="font-size: 0.75rem; color: #666;" id="followup-text">보톡스 세션 2</div>
                            </div>
                            <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </div>

                        <div class="section-title" id="exclusive-offers">당신만을 위한 스페셜 혜택</div>
                        <div class="promo-carousel">
                            <div class="promo-card">
                                <div class="promo-image" style="background-image: url('https://images.unsplash.com/photo-1616394584738-fc6e612e71b9?w=280&h=180&fit=crop');"></div>
                                <div class="promo-content">
                                    <h3 class="promo-title">VIP 페이셜 재생</h3>
                                    <div class="promo-discount">20% 할인</div>
                                    <p>이번 달만</p>
                                    <div style="display: flex; gap: 0.5rem; margin-top: 0.5rem;">
                                        <button class="btn btn-primary" onclick="showBookingScreen('vipfacial')" id="book-now-btn">지금 예약</button>
                                        <button class="btn btn-secondary" onclick="showTreatmentDetail('hydrafacial')">자세히 보기</button>
                                    </div>
                                </div>
                            </div>
                            <div class="promo-card">
                                <div class="promo-image" style="background-image: url('https://images.unsplash.com/photo-1570172619644-dfd03ed5d881?w=280&h=180&fit=crop');"></div>
                                <div class="promo-content">
                                    <h3 class="promo-title">고급 레이저 테라피</h3>
                                    <div class="promo-discount">15% 할인</div>
                                    <p>골드 회원 전용</p>
                                    <div style="display: flex; gap: 0.5rem; margin-top: 0.5rem;">
                                        <button class="btn btn-primary" onclick="showBookingScreen('laserhair')">지금 예약</button>
                                        <button class="btn btn-secondary" onclick="showTreatmentDetail('laserhair')" id="learn-more-btn">자세히 보기</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="section-title">이번 달 인기 시술</div>
                        <div class="popular-treatments">
                            <div class="popular-treatment-card" onclick="showTreatmentDetail('hydrafacial')">
                                <div class="popular-rank">1</div>
                                <img src="https://images.unsplash.com/photo-1555820585-c5ae44394b79?w=60&h=60&fit=crop" class="popular-treatment-image">
                                <div class="popular-treatment-info">
                                    <h4>하이드라 페이셜</h4>
                                    <p class="popular-treatment-stats">예약 127건</p>
                                </div>
                                <div class="popular-treatment-price">₩200,000</div>
                            </div>
                            <div class="popular-treatment-card" onclick="showTreatmentDetail('botox')">
                                <div class="popular-rank">2</div>
                                <img src="https://images.unsplash.com/photo-1619451334792-150fd785ee74?w=60&h=60&fit=crop" class="popular-treatment-image">
                                <div class="popular-treatment-info">
                                    <h4>보톡스 주사</h4>
                                    <p class="popular-treatment-stats">예약 89건</p>
                                </div>
                                <div class="popular-treatment-price">₩400,000</div>
                            </div>
                            <div class="popular-treatment-card" onclick="showTreatmentDetail('lifting')">
                                <div class="popular-rank">3</div>
                                <img src="https://images.unsplash.com/photo-1619451334792-150fd785ee74?w=60&h=60&fit=crop" class="popular-treatment-image">
                                <div class="popular-treatment-info">
                                    <h4>리프팅 시술</h4>
                                    <p class="popular-treatment-stats">예약 76건</p>
                                </div>
                                <div class="popular-treatment-price">₩600,000</div>
                            </div>
                        </div>
                    </div>

                    <!-- Rewards Screen -->
                    <div id="rewards-screen" class="screen">
                        <div class="membership-card" style="margin-top: 0;">
                            <h3>골드 회원</h3>
                            <div>ID: KBH-2023-0847</div>
                            <div class="points-display">2,500 포인트</div>
                            <div class="progress-bar">
                                <div class="progress-fill"></div>
                            </div>
                            <p style="color: white;">플래티넘까지 500 포인트</p>
                        </div>

                        <div class="settings-list">
                            <div class="settings-item" onclick="showCurrentBenefitsScreen()">
                                <div class="settings-item-left">
                                    <svg class="icon settings-icon" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" />
                                    </svg>
                                    <div>
                                        <div>현재 혜택</div>
                                        <small style="color: #666;">모든 서비스 10% 할인, 우선 예약</small>
                                    </div>
                                </div>
                                <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="9 18 15 12 9 6"></polyline>
                                </svg>
                            </div>
                            <div class="settings-item" onclick="showNextTierBenefitsScreen()">
                                <div class="settings-item-left">
                                    <svg class="icon settings-icon" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                        <polyline points="22 4 12 14.01 9 11.01"></polyline>
                                    </svg>
                                    <div>
                                        <div>다음 등급: 플래티넘</div>
                                        <small style="color: #666;">15% 할인, 무료 월간 상담</small>
                                    </div>
                                </div>
                                <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="9 18 15 12 9 6"></polyline>
                                </svg>
                            </div>
                        </div>

                        <!-- Redesigned Refer a Friend Widget -->
                        <div class="referral-widget" onclick="showScreen('referral-detail-screen')">
                            <div class="referral-widget-content">
                                <div class="referral-widget-left">
                                    <div class="referral-widget-icon">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="var(--primary-gold)" stroke-width="2">
                                            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                            <circle cx="8.5" cy="7" r="4"></circle>
                                            <line x1="20" y1="8" x2="20" y2="14"></line>
                                            <line x1="23" y1="11" x2="17" y2="11"></line>
                                        </svg>
                                    </div>
                                    <div class="referral-widget-text">
                                        <h3 class="referral-widget-title">친구 초대하기</h3>
                                        <p class="referral-widget-subtitle">친구와 함께 500 포인트 받기</p>
                                    </div>
                                </div>
                                <button class="referral-share-btn" onclick="event.stopPropagation(); shareReferralCode();">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="18" cy="5" r="3"></circle>
                                        <circle cx="6" cy="12" r="3"></circle>
                                        <circle cx="18" cy="19" r="3"></circle>
                                        <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                                        <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
                                    </svg>
                                    <span>공유하기</span>
                                </button>
                            </div>
                            <div class="referral-widget-progress">
                                <div class="referral-progress-bar">
                                    <div class="referral-progress-fill" style="width: 40%;"></div>
                                </div>
                                <p class="referral-progress-text">2/5 친구 초대 완료</p>
                            </div>
                        </div>

                        <div class="section-title">포인트 활동</div>
                        <div class="settings-list">
                            <div class="settings-item">
                                <div class="settings-item-left">
                                    <svg class="icon settings-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <line x1="12" y1="5" x2="12" y2="19"></line>
                                        <line x1="5" y1="12" x2="19" y2="12"></line>
                                    </svg>
                                    <div>
                                        <div>보톡스 시술</div>
                                        <small style="color: #666;">2025년 8월 5일</small>
                                    </div>
                                </div>
                                <span style="color: var(--success);">+250</span>
                            </div>
                            <div class="settings-item">
                                <div class="settings-item-left">
                                    <svg class="icon settings-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <line x1="5" y1="12" x2="19" y2="12"></line>
                                    </svg>
                                    <div>
                                        <div>사용: 스킨케어 키트</div>
                                        <small style="color: #666;">2025년 7월 28일</small>
                                    </div>
                                </div>
                                <span style="color: var(--error);">-500</span>
                            </div>
                        </div>
                    </div>

                    <!-- Treatments Screen -->
                    <div id="treatments-screen" class="screen">
                        <div class="treatments-filters">
                            <button class="filter-btn active" onclick="filterTreatments('all')">전체</button>
                            <button class="filter-btn" onclick="filterTreatments('facial')">페이셜</button>
                            <button class="filter-btn" onclick="filterTreatments('injection')">주사</button>
                            <button class="filter-btn" onclick="filterTreatments('laser')">레이저</button>
                            <button class="filter-btn" onclick="filterTreatments('body')">바디</button>
                        </div>

                        <div class="treatment-grid">
                            <div class="treatment-card" data-category="facial" onclick="showTreatmentDetail('hydrafacial')">
                                <div class="treatment-image" style="background-image: url('https://images.unsplash.com/photo-1555820585-c5ae44394b79?w=180&h=100&fit=crop');">
                                    <div class="treatment-badge">인기</div>
                                </div>
                                <div class="treatment-content">
                                    <h3 class="treatment-title">하이드라 페이셜</h3>
                                    <div class="treatment-info-row">
                                        <div class="treatment-rating">
                                            <svg width="14" height="14" viewBox="0 0 24 24" class="star">
                                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                            </svg>
                                            <span>4.9 (127)</span>
                                        </div>
                                        <div class="treatment-detail">
                                            <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <circle cx="12" cy="12" r="10"></circle>
                                                <polyline points="12 6 12 12 16 14"></polyline>
                                            </svg>
                                            <span>60분</span>
                                        </div>
                                    </div>
                                    <div class="treatment-price">
                                        <span class="treatment-original-price">₩250,000</span>
                                        <span class="treatment-discount-price">₩200,000</span>
                                    </div>
                                    <button class="btn btn-primary btn-full" onclick="event.stopPropagation(); showBookingScreen('hydrafacial')">상담 예약</button>
                                </div>
                            </div>

                            <div class="treatment-card" data-category="injection" onclick="showTreatmentDetail('botox')">
                                <div class="treatment-image" style="background-image: url('https://images.unsplash.com/photo-1619451334792-150fd785ee74?w=180&h=100&fit=crop');">
                                    <div class="treatment-badge">20% 할인</div>
                                </div>
                                <div class="treatment-content">
                                    <h3 class="treatment-title">보톡스 주사</h3>
                                    <div class="treatment-info-row">
                                        <div class="treatment-rating">
                                            <svg width="14" height="14" viewBox="0 0 24 24" class="star">
                                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                            </svg>
                                            <span>4.7 (89)</span>
                                        </div>
                                        <div class="treatment-detail">
                                            <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <circle cx="12" cy="12" r="10"></circle>
                                                <polyline points="12 6 12 12 16 14"></polyline>
                                            </svg>
                                            <span>30분</span>
                                        </div>
                                    </div>
                                    <div class="treatment-price">
                                        <span class="treatment-original-price">₩500,000</span>
                                        <span class="treatment-discount-price">₩400,000</span>
                                    </div>
                                    <button class="btn btn-primary btn-full" onclick="event.stopPropagation(); showBookingScreen('botox')">상담 예약</button>
                                </div>
                            </div>

                            <div class="treatment-card" data-category="laser" onclick="showTreatmentDetail('laserhair')">
                                <div class="treatment-image" style="background-image: url('https://images.unsplash.com/photo-1519415510236-718bdfcd89c8?w=180&h=100&fit=crop');">
                                </div>
                                <div class="treatment-content">
                                    <h3 class="treatment-title">레이저 제모</h3>
                                    <div class="treatment-info-row">
                                        <div class="treatment-rating">
                                            <svg width="14" height="14" viewBox="0 0 24 24" class="star">
                                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                            </svg>
                                            <span>4.8 (156)</span>
                                        </div>
                                        <div class="treatment-detail">
                                            <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <circle cx="12" cy="12" r="10"></circle>
                                                <polyline points="12 6 12 12 16 14"></polyline>
                                            </svg>
                                            <span>15-90분</span>
                                        </div>
                                    </div>
                                    <div class="treatment-price">
                                        <span class="treatment-discount-price">₩150,000부터</span>
                                    </div>
                                    <button class="btn btn-primary btn-full" onclick="event.stopPropagation(); showBookingScreen('laser')">상담 예약</button>
                                </div>
                            </div>

                            <div class="treatment-card" data-category="injection" onclick="showTreatmentDetail('filler')">
                                <div class="treatment-image" style="background-image: url('https://images.unsplash.com/photo-1664447972862-e26efc5b709f?w=180&h=100&fit=crop');">
                                    <div class="treatment-badge">신규</div>
                                </div>
                                <div class="treatment-content">
                                    <h3 class="treatment-title">필러 시술</h3>
                                    <div class="treatment-info-row">
                                        <div class="treatment-rating">
                                            <svg width="14" height="14" viewBox="0 0 24 24" class="star">
                                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                            </svg>
                                            <span>4.6 (73)</span>
                                        </div>
                                        <div class="treatment-detail">
                                            <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <circle cx="12" cy="12" r="10"></circle>
                                                <polyline points="12 6 12 12 16 14"></polyline>
                                            </svg>
                                            <span>45분</span>
                                        </div>
                                    </div>
                                    <div class="treatment-price">
                                        <span class="treatment-discount-price">₩350,000</span>
                                    </div>
                                    <button class="btn btn-primary btn-full" onclick="event.stopPropagation(); showBookingScreen('hydrafacial')">상담 예약</button>
                                </div>
                            </div>

                            <div class="treatment-card" data-category="body" onclick="showTreatmentDetail('bodycontouring')">
                                <div class="treatment-image" style="background-image: url('https://images.unsplash.com/photo-1544161515-4ab6ce6db874?w=180&h=100&fit=crop');">
                                </div>
                                <div class="treatment-content">
                                    <h3 class="treatment-title">바디 컨투어링</h3>
                                    <div class="treatment-info-row">
                                        <div class="treatment-rating">
                                            <svg width="14" height="14" viewBox="0 0 24 24" class="star">
                                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                            </svg>
                                            <span>4.5 (61)</span>
                                        </div>
                                        <div class="treatment-detail">
                                            <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <circle cx="12" cy="12" r="10"></circle>
                                                <polyline points="12 6 12 12 16 14"></polyline>
                                            </svg>
                                            <span>90분</span>
                                        </div>
                                    </div>
                                    <div class="treatment-price">
                                        <span class="treatment-discount-price">₩300,000</span>
                                    </div>
                                    <button class="btn btn-primary btn-full" onclick="event.stopPropagation(); showBookingScreen('hydrafacial')">상담 예약</button>
                                </div>
                            </div>

                            <div class="treatment-card" data-category="facial" onclick="showTreatmentDetail('kglassskin')">
                                <div class="treatment-image" style="background-image: url('https://images.unsplash.com/photo-1616394584738-fc6e612e71b9?w=180&h=100&fit=crop');">
                                </div>
                                <div class="treatment-content">
                                    <h3 class="treatment-title">K-글래스 스킨</h3>
                                    <div class="treatment-info-row">
                                        <div class="treatment-rating">
                                            <svg width="14" height="14" viewBox="0 0 24 24" class="star">
                                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                            </svg>
                                            <span>4.9 (142)</span>
                                        </div>
                                        <div class="treatment-detail">
                                            <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <circle cx="12" cy="12" r="10"></circle>
                                                <polyline points="12 6 12 12 16 14"></polyline>
                                            </svg>
                                            <span>75분</span>
                                        </div>
                                    </div>
                                    <div class="treatment-price">
                                        <span class="treatment-discount-price">₩280,000</span>
                                    </div>
                                    <button class="btn btn-primary btn-full" onclick="event.stopPropagation(); showBookingScreen('hydrafacial')">상담 예약</button>
                                </div>
                            </div>

                            <div class="treatment-card" data-category="facial" onclick="showTreatmentDetail('glowtherapy')">
                                <div class="treatment-image" style="background-image: url('https://images.unsplash.com/photo-1522337360788-8b13dee7a37e?w=180&h=100&fit=crop');">
                                    <div class="treatment-badge">NEW</div>
                                </div>
                                <div class="treatment-content">
                                    <h3 class="treatment-title">글로우 테라피</h3>
                                    <div class="treatment-info-row">
                                        <div class="treatment-rating">
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="#FFD700">
                                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                            </svg>
                                            <span>4.8 (93)</span>
                                        </div>
                                        <div class="treatment-detail">
                                            <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <circle cx="12" cy="12" r="10"></circle>
                                                <polyline points="12 6 12 12 16 14"></polyline>
                                            </svg>
                                            <span>50분</span>
                                        </div>
                                    </div>
                                    <div class="treatment-price">
                                        <span class="treatment-discount-price">₩180,000</span>
                                    </div>
                                    <button class="btn btn-primary btn-full" onclick="event.stopPropagation(); showBookingScreen('hydrafacial')">상담 예약</button>
                                </div>
                            </div>

                            <div class="treatment-card" data-category="laser" onclick="showTreatmentDetail('skinresurfacing')">
                                <div class="treatment-image" style="background-image: url('https://images.unsplash.com/photo-1515377905703-c4788e51af15?w=180&h=100&fit=crop');">
                                </div>
                                <div class="treatment-content">
                                    <h3 class="treatment-title">스킨 리서페이싱</h3>
                                    <div class="treatment-info-row">
                                        <div class="treatment-rating">
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="#FFD700">
                                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                            </svg>
                                            <span>4.7 (108)</span>
                                        </div>
                                        <div class="treatment-detail">
                                            <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <circle cx="12" cy="12" r="10"></circle>
                                                <polyline points="12 6 12 12 16 14"></polyline>
                                            </svg>
                                            <span>40분</span>
                                        </div>
                                    </div>
                                    <div class="treatment-price">
                                        <span class="treatment-original-price">₩450,000</span>
                                        <span class="treatment-discount-price">₩380,000</span>
                                    </div>
                                    <button class="btn btn-primary btn-full" onclick="event.stopPropagation(); showBookingScreen('hydrafacial')">상담 예약</button>
                                </div>
                            </div>

                            <div class="treatment-card" data-category="injection" onclick="showTreatmentDetail('lifting')">
                                <div class="treatment-image" style="background-image: url('https://images.unsplash.com/photo-1619451334792-150fd785ee74?w=180&h=100&fit=crop');">
                                    <div class="treatment-badge">프리미엄</div>
                                </div>
                                <div class="treatment-content">
                                    <h3 class="treatment-title">리프팅 시술</h3>
                                    <div class="treatment-info-row">
                                        <div class="treatment-rating">
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="#FFD700">
                                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                            </svg>
                                            <span>4.9 (142)</span>
                                        </div>
                                        <div class="treatment-detail">
                                            <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <circle cx="12" cy="12" r="10"></circle>
                                                <polyline points="12 6 12 12 16 14"></polyline>
                                            </svg>
                                            <span>60분</span>
                                        </div>
                                    </div>
                                    <div class="treatment-price">
                                        <span class="treatment-discount-price">₩600,000</span>
                                    </div>
                                    <button class="btn btn-primary btn-full" onclick="event.stopPropagation(); showBookingScreen('hydrafacial')">상담 예약</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Treatment Detail Screen -->
                    <div id="treatment-detail-screen" class="screen">
                        <div class="screen-content" style="padding-bottom: calc(var(--nav-height) + 80px);">
                        <div class="treatment-detail-header">
                            <button class="back-button" onclick="showScreen('treatments-screen')">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="15 18 9 12 15 6"></polyline>
                                </svg>
                            </button>
                            <img id="treatment-detail-image" src="https://images.unsplash.com/photo-1555820585-c5ae44394b79?w=390&h=250&fit=crop" style="width: 100%; height: 250px; object-fit: cover;">
                        </div>
                        <div class="detail-section">
                            <h2 id="treatment-detail-title">하이드라 페이셜</h2>
                            <p id="treatment-detail-description">최신 기술을 활용한 딥 클렌징과 수분 공급으로 빛나는 피부를 만들어드립니다.</p>
                            
                            <h3>시술 정보</h3>
                            <div class="detail-row">
                                <span class="detail-label">소요 시간</span>
                                <span class="detail-value" id="treatment-detail-duration">60분</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">가격</span>
                                <span class="detail-value" id="treatment-detail-price">₩200,000</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">효과 지속 기간</span>
                                <span class="detail-value">4-6주</span>
                            </div>
                        </div>
                        
                        <div class="detail-section">
                            <h3>시술 전후</h3>
                            <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">
                                <div style="flex: 1; text-align: center;">
                                    <img src="https://images.unsplash.com/photo-1560750588-73207b1ef5b8?w=180&h=120&fit=crop" style="width: 100%; border-radius: 8px; margin-bottom: 0.5rem;">
                                    <span style="font-size: 0.875rem; color: #666;">시술 전</span>
                                </div>
                                <div style="flex: 1; text-align: center;">
                                    <img src="https://images.unsplash.com/photo-1519415510236-718bdfcd89c8?w=180&h=120&fit=crop" style="width: 100%; border-radius: 8px; margin-bottom: 0.5rem;">
                                    <span style="font-size: 0.875rem; color: #666;">시술 후</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="detail-section">
                            <h3>담당 의료진</h3>
                            <div style="display: flex; gap: 1rem; margin-top: 1rem; overflow-x: auto;">
                                <div style="text-align: center; min-width: 100px;">
                                    <img src="https://images.unsplash.com/photo-1559839734-2b71ea197ec2?w=80&h=80&fit=crop" style="width: 80px; height: 80px; border-radius: 50%; margin-bottom: 0.5rem;">
                                    <h4 style="font-size: 0.875rem; margin: 0;">박지훈 원장</h4>
                                    <p style="font-size: 0.75rem; color: #666; margin: 0;">피부과 전문의</p>
                                </div>
                                <div style="text-align: center; min-width: 100px;">
                                    <img src="https://images.unsplash.com/photo-1582750433449-648ed127bb54?w=80&h=80&fit=crop" style="width: 80px; height: 80px; border-radius: 50%; margin-bottom: 0.5rem;">
                                    <h4 style="font-size: 0.875rem; margin: 0;">이소영 과장</h4>
                                    <p style="font-size: 0.75rem; color: #666; margin: 0;">레이저 전문</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="detail-section">
                            <h3>고객 후기</h3>
                            <div style="margin-top: 1rem;">
                                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                    <strong>김미영</strong>
                                    <div class="treatment-rating">
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="#FFD700">
                                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                        </svg>
                                        <span>5.0</span>
                                    </div>
                                </div>
                                <p style="font-size: 0.875rem; color: #666;">피부가 정말 맑아졌어요! 친구들이 무슨 시술 받았냐고 물어봐요.</p>
                            </div>
                        </div>
                        </div>
                        
                        <!-- Treatment Detail Fixed Bottom -->
                        <div class="treatment-detail-fixed-bottom">
                            <button class="book-now-btn" onclick="showBookingScreen(window.currentTreatmentId)">지금 예약하기</button>
                        </div>
                    </div>

                    <!-- Appointments Screen -->
                    <div id="appointments-screen" class="screen">
                        <div class="appointment-tabs">
                            <button class="tab-btn active" onclick="showAppointmentTab('upcoming')">예정된 예약</button>
                            <button class="tab-btn" onclick="showAppointmentTab('history')">지난 예약</button>
                        </div>

                        <div id="upcoming-appointments" class="appointment-list">
                            <div class="appointment-card" data-appointment-id="tomorrow">
                                <div class="appointment-header">
                                    <div>
                                        <div class="appointment-date">내일</div>
                                        <div class="appointment-time">오후 3:00</div>
                                    </div>
                                    <div class="appointment-status">확정</div>
                                </div>
                                <div class="appointment-details">
                                    <div class="appointment-detail-row">
                                        <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                            <polyline points="22 4 12 14.01 9 11.01"></polyline>
                                        </svg>
                                        <span>후속 상담</span>
                                    </div>
                                    <div class="appointment-detail-row">
                                        <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                            <circle cx="12" cy="7" r="4"></circle>
                                        </svg>
                                        <span>김민정 박사</span>
                                    </div>
                                    <div class="appointment-detail-row">
                                        <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                                            <circle cx="12" cy="10" r="3"></circle>
                                        </svg>
                                        <span>302호, 3층</span>
                                    </div>
                                </div>
                                <div class="appointment-reminder">
                                    <svg class="icon-small appointment-reminder-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="10"></circle>
                                        <line x1="12" y1="8" x2="12" y2="12"></line>
                                        <line x1="12" y1="16" x2="12.01" y2="16"></line>
                                    </svg>
                                    <span>주의: 시술 24시간 전 화장 금지</span>
                                </div>
                                <div class="appointment-actions">
                                    <button class="btn btn-primary" onclick="showAppointmentDetail('tomorrow')">상세 보기</button>
                                    <button class="btn btn-secondary" onclick="showRescheduleScreen('tomorrow')">일정 변경</button>
                                </div>
                            </div>

                            <div class="appointment-card">
                                <div class="appointment-header">
                                    <div>
                                        <div class="appointment-date">2025년 8월 15일</div>
                                        <div class="appointment-time">오전 10:00</div>
                                    </div>
                                    <div class="appointment-status">확정</div>
                                </div>
                                <div class="appointment-details">
                                    <div class="appointment-detail-row">
                                        <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                            <polyline points="22 4 12 14.01 9 11.01"></polyline>
                                        </svg>
                                        <span>하이드라 페이셜</span>
                                    </div>
                                    <div class="appointment-detail-row">
                                        <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                            <circle cx="12" cy="7" r="4"></circle>
                                        </svg>
                                        <span>이수진 박사</span>
                                    </div>
                                    <div class="appointment-detail-row">
                                        <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                                            <circle cx="12" cy="10" r="3"></circle>
                                        </svg>
                                        <span>시술실 2, 2층</span>
                                    </div>
                                </div>
                                <div class="appointment-actions">
                                    <button class="btn btn-primary" onclick="showAppointmentDetail('aug15')">상세 보기</button>
                                    <button class="btn btn-secondary" onclick="showRescheduleScreen('aug15')">일정 변경</button>
                                </div>
                            </div>
                        </div>

                        <div id="history-appointments" class="appointment-list" style="display: none;">
                            <div class="appointment-card">
                                <div class="appointment-header">
                                    <div>
                                        <div class="appointment-date">2025년 8월 5일</div>
                                        <div class="appointment-time">오후 2:00</div>
                                    </div>
                                    <div class="appointment-status" style="background: #E8F5E9; color: #4CAF50;">완료</div>
                                </div>
                                <div class="appointment-details">
                                    <div class="appointment-detail-row">
                                        <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                            <polyline points="22 4 12 14.01 9 11.01"></polyline>
                                        </svg>
                                        <span>보톡스 - 이마</span>
                                    </div>
                                    <div class="appointment-detail-row">
                                        <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                            <circle cx="12" cy="7" r="4"></circle>
                                        </svg>
                                        <span>김수현 박사</span>
                                    </div>
                                </div>
                                <div class="appointment-actions">
                                    <button class="btn btn-primary">다시 예약</button>
                                    <button class="btn btn-secondary">리뷰 남기기</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Appointment Detail Screen -->
                    <div id="appointment-detail-screen" class="screen">
                        <div class="appointment-detail-header">
                            <button class="back-button" onclick="showScreen('appointments-screen')">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="15 18 9 12 15 6"></polyline>
                                </svg>
                            </button>
                            <h2 id="detail-title">예약 상세</h2>
                            <p id="detail-date">내일, 오후 3:00</p>
                        </div>

                        <div class="detail-section">
                            <h3>시술 정보</h3>
                            <div class="detail-row">
                                <span class="detail-label">서비스</span>
                                <span class="detail-value" id="detail-service">후속 상담</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">예상 소요시간</span>
                                <span class="detail-value">30분</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">담당의</span>
                                <span class="detail-value" id="detail-doctor">김민정 박사</span>
                            </div>
                        </div>

                        <div class="detail-section">
                            <h3>위치 정보</h3>
                            <div class="detail-row">
                                <span class="detail-label">장소</span>
                                <span class="detail-value" id="detail-location">302호, 3층</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">주소</span>
                                <span class="detail-value">하노이 K-뷰티 병원</span>
                            </div>
                        </div>

                        <div class="detail-section">
                            <h3>준비사항</h3>
                            <p style="line-height: 1.6; color: #666;">
                                • 시술 24시간 전부터 화장을 하지 마세요<br>
                                • 편안한 복장으로 방문해 주세요<br>
                                • 예약 시간 10분 전에 도착해 주세요<br>
                                • 이전 시술 기록을 준비해 주세요
                            </p>
                        </div>

                        <div style="padding: 1rem;">
                            <button class="btn btn-primary btn-full" onclick="showScreen('appointments-screen')">돌아가기</button>
                        </div>
                    </div>


                    <!-- Chat Screen -->
                    <div id="chat-screen" class="screen" style="display: flex; flex-direction: column;">
                        <div class="chat-container" style="flex: 1; overflow: hidden; display: flex; flex-direction: column;">
                            <div class="chat-header">
                                <div class="chat-avatar">
                                    <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
                                        <circle cx="12" cy="12" r="10" fill="#D4AF37"/>
                                        <path d="M10 8h4v3h3v4h-3v3h-4v-3H7v-4h3V8z" fill="white"/>
                                    </svg>
                                </div>
                                <div>
                                    <div>AI 뷰티 컨설턴트</div>
                                    <div class="chat-status">온라인</div>
                                </div>
                            </div>

                            <div class="chat-messages" id="chat-messages">
                                <div class="message message-bot">
                                    <div class="chat-avatar" style="width: 30px; height: 30px;">
                                        <svg class="icon-small" viewBox="0 0 24 24" fill="currentColor">
                                            <circle cx="12" cy="12" r="10" fill="#D4AF37"/>
                                            <path d="M10 8h4v3h3v4h-3v3h-4v-3H7v-4h3V8z" fill="white"/>
                                        </svg>
                                    </div>
                                    <div>
                                        <div class="message-bubble">
                                            안녕하세요! AI 뷰티 컨설턴트입니다. 어떻게 도와드릴까요?
                                        </div>
                                        <div class="quick-replies">
                                            <button class="quick-reply-btn" onclick="sendQuickReply('포인트 확인')">포인트 확인</button>
                                            <button class="quick-reply-btn" onclick="sendQuickReply('예약하기')">예약하기</button>
                                            <button class="quick-reply-btn" onclick="sendQuickReply('시술 정보')">시술 정보</button>
                                            <button class="quick-reply-btn" onclick="sendQuickReply('상담원 연결')">상담원 연결</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                        
                        <!-- Chat Input Container -->
                        <div class="chat-input-container">
                            <button class="chat-input-btn" onclick="openCamera()">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path>
                                    <circle cx="12" cy="13" r="4"></circle>
                                </svg>
                            </button>
                            <input type="text" class="chat-input-field" placeholder="메시지를 입력하세요..." id="chat-input">
                            <button class="chat-input-btn send" onclick="sendMessage()">
                                <svg class="icon icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="22" y1="2" x2="11" y2="13"></line>
                                    <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <!-- Profile Screen -->
                    <div id="profile-screen" class="screen">
                        <div class="profile-header">
                            <div class="profile-avatar">S</div>
                            <h2>Sarah Kim</h2>
                            <p>골드 회원 • 2023년부터</p>
                        </div>

                        <div class="settings-list">
                            <div class="settings-item" onclick="showPersonalInfoScreen()">
                                <div class="settings-item-left">
                                    <svg class="icon settings-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                        <circle cx="12" cy="7" r="4"></circle>
                                    </svg>
                                    <div>개인 정보</div>
                                </div>
                                <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="9 18 15 12 9 6"></polyline>
                                </svg>
                            </div>
                            <div class="settings-item" onclick="showTreatmentHistoryScreen()">
                                <div class="settings-item-left">
                                    <svg class="icon settings-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                        <polyline points="14 2 14 8 20 8"></polyline>
                                        <line x1="16" y1="13" x2="8" y2="13"></line>
                                        <line x1="16" y1="17" x2="8" y2="17"></line>
                                        <polyline points="10 9 9 9 8 9"></polyline>
                                    </svg>
                                    <div>시술 기록</div>
                                </div>
                                <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="9 18 15 12 9 6"></polyline>
                                </svg>
                            </div>
                            <div class="settings-item" onclick="showPaymentMethodsScreen()">
                                <div class="settings-item-left">
                                    <svg class="icon settings-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                                        <line x1="1" y1="10" x2="23" y2="10"></line>
                                    </svg>
                                    <div>결제 수단</div>
                                </div>
                                <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="9 18 15 12 9 6"></polyline>
                                </svg>
                            </div>
                            <div class="settings-item" onclick="showSecurityScreen()">
                                <div class="settings-item-left">
                                    <svg class="icon settings-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                        <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                                    </svg>
                                    <div>보안</div>
                                </div>
                                <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="9 18 15 12 9 6"></polyline>
                                </svg>
                            </div>
                        </div>

                        <div class="settings-list" style="margin-top: 2rem;">
                            <div class="settings-item" onclick="showCustomerSupportScreen()">
                                <div class="settings-item-left">
                                    <svg class="icon settings-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                                    </svg>
                                    <div>고객 지원</div>
                                </div>
                                <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="9 18 15 12 9 6"></polyline>
                                </svg>
                            </div>
                            <div class="settings-item" onclick="showTermsScreen()">
                                <div class="settings-item-left">
                                    <svg class="icon settings-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                        <polyline points="14 2 14 8 20 8"></polyline>
                                        <line x1="16" y1="13" x2="8" y2="13"></line>
                                        <line x1="16" y1="17" x2="8" y2="17"></line>
                                        <polyline points="10 9 9 9 8 9"></polyline>
                                    </svg>
                                    <div>이용약관 및 개인정보</div>
                                </div>
                                <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="9 18 15 12 9 6"></polyline>
                                </svg>
                            </div>
                            <div class="settings-item" style="color: var(--error);">
                                <div class="settings-item-left">
                                    <svg class="icon settings-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                        <polyline points="16 17 21 12 16 7"></polyline>
                                        <line x1="21" y1="12" x2="9" y2="12"></line>
                                    </svg>
                                    <div>로그아웃</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Booking Screen -->
                    <div id="booking-screen" class="screen">
                        <div class="reschedule-header">
                            <button class="back-button" onclick="showScreen('home-screen')">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="15 18 9 12 15 6"></polyline>
                                </svg>
                            </button>
                            <h2>예약하기</h2>
                            <p>서비스를 선택하고 일정을 정하세요</p>
                        </div>
                        <div class="reschedule-content">
                            <div class="section-title">서비스 선택</div>
                            <div style="margin: 0 1rem 1.5rem;">
                                <select class="form-select" id="service-select" onchange="updateServiceInfo()">
                                    <option value="">서비스를 선택하세요</option>
                                    <option value="hydrafacial">하이드라 페이셜 - ₩200,000</option>
                                    <option value="botox">보톡스 주사 - ₩400,000</option>
                                    <option value="laser">레이저 제모 - ₩150,000부터</option>
                                    <option value="filler">필러 시술 - ₩350,000</option>
                                    <option value="lifting">리프팅 시술 - ₩600,000</option>
                                    <option value="laserhair">고급 레이저 테라피 - ₩450,000</option>
                                    <option value="vipfacial">VIP 페이셜 재생 - ₩380,000</option>
                                </select>
                            </div>

                            <div class="section-title">날짜 선택</div>
                            <div class="calendar-container">
                                <div class="calendar-month-nav">
                                    <button class="month-nav-btn" onclick="changeMonthBooking(-1)">
                                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <polyline points="15 18 9 12 15 6"></polyline>
                                        </svg>
                                    </button>
                                    <h3 id="booking-current-month">2025년 7월</h3>
                                    <button class="month-nav-btn" onclick="changeMonthBooking(1)">
                                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <polyline points="9 18 15 12 9 6"></polyline>
                                        </svg>
                                    </button>
                                </div>
                                <div class="calendar-header">
                                    <div class="calendar-day weekend">일</div>
                                    <div class="calendar-day">월</div>
                                    <div class="calendar-day">화</div>
                                    <div class="calendar-day">수</div>
                                    <div class="calendar-day">목</div>
                                    <div class="calendar-day">금</div>
                                    <div class="calendar-day weekend">토</div>
                                </div>
                                <div class="date-grid" id="booking-date-grid"></div>
                            </div>

                            <div id="booking-time-section" style="display: none;">
                                <div class="section-title">시간 선택</div>
                                <div class="time-slots" id="booking-time-slots"></div>
                            </div>
                        </div>

                        <div class="reschedule-fixed-bottom">
                            <button class="btn btn-primary btn-full" id="confirm-booking-btn" onclick="confirmBooking()" disabled>예약 확정</button>
                        </div>
                    </div>

                    <!-- Current Benefits Screen -->
                    <div id="current-benefits-screen" class="screen">
                        <div class="reschedule-header">
                            <button class="back-button" onclick="showScreen('rewards-screen')">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="15 18 9 12 15 6"></polyline>
                                </svg>
                            </button>
                            <h2>현재 혜택</h2>
                            <p>골드 회원 혜택</p>
                        </div>
                        <div class="reschedule-content">
                            <div style="background: linear-gradient(135deg, var(--primary-gold) 0%, #E5C767 100%); border-radius: var(--border-radius); padding: 1.5rem; margin: 1rem;">
                                <h3 style="color: white; margin-bottom: 1rem;">골드 회원 전용 혜택</h3>
                                <div style="display: grid; gap: 1rem;">
                                    <div style="background: rgba(255,255,255,0.2); border-radius: 8px; padding: 1rem;">
                                        <h4 style="color: white; margin: 0 0 0.5rem 0;">모든 시술 10% 할인</h4>
                                        <p style="color: rgba(255,255,255,0.9); margin: 0; font-size: 0.875rem;">레이저, 필러, 보톡스 등 모든 시술에 적용</p>
                                    </div>
                                    <div style="background: rgba(255,255,255,0.2); border-radius: 8px; padding: 1rem;">
                                        <h4 style="color: white; margin: 0 0 0.5rem 0;">우선 예약 서비스</h4>
                                        <p style="color: rgba(255,255,255,0.9); margin: 0; font-size: 0.875rem;">인기 시간대 우선 예약 가능</p>
                                    </div>
                                    <div style="background: rgba(255,255,255,0.2); border-radius: 8px; padding: 1rem;">
                                        <h4 style="color: white; margin: 0 0 0.5rem 0;">무료 피부 상담</h4>
                                        <p style="color: rgba(255,255,255,0.9); margin: 0; font-size: 0.875rem;">분기별 1회 무료 전문가 상담</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="section-title">포인트로 교환 가능한 서비스</div>
                            <div style="margin: 0 1rem;">
                                <div style="background: var(--white); border-radius: var(--border-radius); padding: 1rem; margin-bottom: 0.75rem; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>
                                            <h4 style="margin: 0 0 0.25rem 0;">프리미엄 마스크팩</h4>
                                            <p style="color: #666; margin: 0; font-size: 0.875rem;">500 포인트</p>
                                        </div>
                                        <button class="btn btn-primary" style="padding: 0.5rem 1rem; font-size: 0.875rem;">교환하기</button>
                                    </div>
                                </div>
                                <div style="background: var(--white); border-radius: var(--border-radius); padding: 1rem; margin-bottom: 0.75rem; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>
                                            <h4 style="margin: 0 0 0.25rem 0;">LED 테라피 1회</h4>
                                            <p style="color: #666; margin: 0; font-size: 0.875rem;">1,000 포인트</p>
                                        </div>
                                        <button class="btn btn-primary" style="padding: 0.5rem 1rem; font-size: 0.875rem;">교환하기</button>
                                    </div>
                                </div>
                                <div style="background: var(--white); border-radius: var(--border-radius); padding: 1rem; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>
                                            <h4 style="margin: 0 0 0.25rem 0;">아쿠아 필링 시술</h4>
                                            <p style="color: #666; margin: 0; font-size: 0.875rem;">2,500 포인트</p>
                                        </div>
                                        <button class="btn btn-primary" style="padding: 0.5rem 1rem; font-size: 0.875rem;">교환하기</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Next Tier Benefits Screen -->
                    <div id="next-tier-benefits-screen" class="screen">
                        <div class="reschedule-header">
                            <button class="back-button" onclick="showScreen('rewards-screen')">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="15 18 9 12 15 6"></polyline>
                                </svg>
                            </button>
                            <h2>다음 등급 혜택</h2>
                            <p>플래티넘 회원이 되면</p>
                        </div>
                        <div class="reschedule-content">
                            <div style="background: linear-gradient(135deg, #E5E5E5 0%, #C0C0C0 100%); border-radius: var(--border-radius); padding: 1.5rem; margin: 1rem;">
                                <h3 style="color: #333; margin-bottom: 1rem;">플래티넘 회원 전용 혜택</h3>
                                <div style="display: grid; gap: 1rem;">
                                    <div style="background: rgba(255,255,255,0.5); border-radius: 8px; padding: 1rem;">
                                        <h4 style="color: #333; margin: 0 0 0.5rem 0;">모든 시술 15% 할인</h4>
                                        <p style="color: #666; margin: 0; font-size: 0.875rem;">골드 회원보다 5% 추가 할인</p>
                                    </div>
                                    <div style="background: rgba(255,255,255,0.5); border-radius: 8px; padding: 1rem;">
                                        <h4 style="color: #333; margin: 0 0 0.5rem 0;">무료 월간 상담</h4>
                                        <p style="color: #666; margin: 0; font-size: 0.875rem;">매월 1회 무료 전문가 상담</p>
                                    </div>
                                    <div style="background: rgba(255,255,255,0.5); border-radius: 8px; padding: 1rem;">
                                        <h4 style="color: #333; margin: 0 0 0.5rem 0;">VIP 라운지 이용</h4>
                                        <p style="color: #666; margin: 0; font-size: 0.875rem;">프라이빗 대기실 및 음료 서비스</p>
                                    </div>
                                    <div style="background: rgba(255,255,255,0.5); border-radius: 8px; padding: 1rem;">
                                        <h4 style="color: #333; margin: 0 0 0.5rem 0;">생일 특별 혜택</h4>
                                        <p style="color: #666; margin: 0; font-size: 0.875rem;">생일달 무료 기초 관리 시술</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="section-title">플래티넘 전용 포인트 혜택</div>
                            <div style="margin: 0 1rem;">
                                <div style="background: var(--white); border-radius: var(--border-radius); padding: 1rem; margin-bottom: 0.75rem; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>
                                            <h4 style="margin: 0 0 0.25rem 0;">하이드라 페이셜 50% 할인</h4>
                                            <p style="color: #666; margin: 0; font-size: 0.875rem;">1,500 포인트</p>
                                        </div>
                                        <span style="background: #E5E5E5; color: #666; padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.75rem;">플래티넘 전용</span>
                                    </div>
                                </div>
                                <div style="background: var(--white); border-radius: var(--border-radius); padding: 1rem; margin-bottom: 0.75rem; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>
                                            <h4 style="margin: 0 0 0.25rem 0;">보톡스 시술 30% 할인</h4>
                                            <p style="color: #666; margin: 0; font-size: 0.875rem;">3,000 포인트</p>
                                        </div>
                                        <span style="background: #E5E5E5; color: #666; padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.75rem;">플래티넘 전용</span>
                                    </div>
                                </div>
                                <div style="background: var(--white); border-radius: var(--border-radius); padding: 1rem; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>
                                            <h4 style="margin: 0 0 0.25rem 0;">무료 리프팅 시술</h4>
                                            <p style="color: #666; margin: 0; font-size: 0.875rem;">5,000 포인트</p>
                                        </div>
                                        <span style="background: #E5E5E5; color: #666; padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.75rem;">플래티넘 전용</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div style="background: var(--soft-gold); border-radius: var(--border-radius); padding: 1rem; margin: 1rem; text-align: center;">
                                <p style="margin: 0 0 0.5rem 0; font-weight: 500;">플래티넘까지 500 포인트 남았습니다!</p>
                                <div class="progress-bar" style="margin: 0.5rem 0;">
                                    <div class="progress-fill" style="width: 70%;"></div>
                                </div>
                                <p style="margin: 0; font-size: 0.875rem; color: #666;">2,500 / 3,000 포인트</p>
                            </div>
                        </div>
                    </div>

                    <!-- Payment Methods Screen -->
                    <div id="payment-methods-screen" class="screen">
                        <div class="reschedule-header">
                            <button class="back-button" onclick="showScreen('profile-screen')">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="15 18 9 12 15 6"></polyline>
                                </svg>
                            </button>
                            <h2>결제 수단</h2>
                            <p>결제 방법 및 환경 설정</p>
                        </div>
                        <div class="reschedule-content">
                            <!-- Currency Selection -->
                            <div class="section-title">결제 통화 선택</div>
                            <div style="margin: 0 1rem 1.5rem;">
                                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem;">
                                    <button class="currency-btn active" onclick="selectCurrency('KRW')">
                                        <span style="font-size: 1.25rem;">₩</span>
                                        <span style="font-size: 0.875rem;">KRW</span>
                                    </button>
                                    <button class="currency-btn" onclick="selectCurrency('VND')">
                                        <span style="font-size: 1.25rem;">₫</span>
                                        <span style="font-size: 0.875rem;">VND</span>
                                    </button>
                                    <button class="currency-btn" onclick="selectCurrency('USD')">
                                        <span style="font-size: 1.25rem;">$</span>
                                        <span style="font-size: 0.875rem;">USD</span>
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Saved Cards -->
                            <div class="section-title">저장된 카드</div>
                            <div style="margin: 0 1rem 1.5rem;">
                                <div style="background: var(--white); border-radius: var(--border-radius); padding: 1rem; margin-bottom: 0.75rem; box-shadow: 0 2px 8px rgba(0,0,0,0.08); display: flex; align-items: center; gap: 1rem;">
                                    <div style="background: #1A1F71; width: 50px; height: 32px; border-radius: 4px; display: flex; align-items: center; justify-content: center;">
                                        <span style="color: white; font-weight: bold; font-size: 0.75rem;">VISA</span>
                                    </div>
                                    <div style="flex: 1;">
                                        <div style="font-weight: 500;">•••• 4242</div>
                                        <div style="font-size: 0.75rem; color: #666;">만료: 12/25</div>
                                    </div>
                                    <span style="background: var(--soft-gold); color: var(--primary-gold); padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.75rem; font-weight: 500;">기본</span>
                                </div>
                                <div style="background: var(--white); border-radius: var(--border-radius); padding: 1rem; margin-bottom: 0.75rem; box-shadow: 0 2px 8px rgba(0,0,0,0.08); display: flex; align-items: center; gap: 1rem;">
                                    <div style="background: #EB001B; width: 50px; height: 32px; border-radius: 4px; display: flex; align-items: center; justify-content: center;">
                                        <span style="color: white; font-weight: bold; font-size: 0.75rem;">MC</span>
                                    </div>
                                    <div style="flex: 1;">
                                        <div style="font-weight: 500;">•••• 8888</div>
                                        <div style="font-size: 0.75rem; color: #666;">만료: 06/26</div>
                                    </div>
                                </div>
                                <button class="btn btn-secondary btn-full" style="margin-top: 0.5rem;">
                                    <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 0.5rem;">
                                        <line x1="12" y1="5" x2="12" y2="19"></line>
                                        <line x1="5" y1="12" x2="19" y2="12"></line>
                                    </svg>
                                    새 카드 추가
                                </button>
                            </div>
                            
                            <!-- Digital Wallets -->
                            <div class="section-title">디지털 지갑</div>
                            <div style="margin: 0 1rem 1.5rem;">
                                <div style="background: var(--white); border-radius: var(--border-radius); padding: 1rem; margin-bottom: 0.75rem; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div style="display: flex; align-items: center; gap: 1rem;">
                                            <div style="background: #000; width: 50px; height: 32px; border-radius: 4px; display: flex; align-items: center; justify-content: center;">
                                                <span style="color: white; font-size: 0.75rem;">Pay</span>
                                            </div>
                                            <div>
                                                <div style="font-weight: 500;">Apple Pay</div>
                                                <div style="font-size: 0.75rem; color: #666;">빠른 결제</div>
                                            </div>
                                        </div>
                                        <label class="switch">
                                            <input type="checkbox" checked>
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                </div>
                                <div style="background: var(--white); border-radius: var(--border-radius); padding: 1rem; margin-bottom: 0.75rem; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div style="display: flex; align-items: center; gap: 1rem;">
                                            <div style="background: #4285F4; width: 50px; height: 32px; border-radius: 4px; display: flex; align-items: center; justify-content: center;">
                                                <span style="color: white; font-size: 0.65rem; font-weight: bold;">GPay</span>
                                            </div>
                                            <div>
                                                <div style="font-weight: 500;">Google Pay</div>
                                                <div style="font-size: 0.75rem; color: #666;">빠른 결제</div>
                                            </div>
                                        </div>
                                        <label class="switch">
                                            <input type="checkbox">
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Wallet & Gift Cards -->
                            <div class="section-title">지갑 & 기프트 카드</div>
                            <div style="margin: 0 1rem 1.5rem;">
                                <div style="background: linear-gradient(135deg, var(--soft-gold) 0%, var(--white) 100%); border-radius: var(--border-radius); padding: 1.5rem; margin-bottom: 1rem;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                        <h3 style="margin: 0;">병원 지갑</h3>
                                        <span style="font-size: 1.5rem; font-weight: 500; color: var(--primary-gold);">₩85,000</span>
                                    </div>
                                    <p style="font-size: 0.875rem; color: #666; margin: 0;">환불 금액 및 선불 충전금</p>
                                    <button class="btn btn-primary btn-full" style="margin-top: 1rem;">충전하기</button>
                                </div>
                                
                                <div style="background: var(--white); border-radius: var(--border-radius); padding: 1rem; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                                        <h4 style="margin: 0;">e-기프트 카드</h4>
                                        <button class="btn btn-secondary" style="padding: 0.25rem 0.75rem; font-size: 0.875rem;">추가</button>
                                    </div>
                                    <div style="border-top: 1px solid var(--medium-gray); padding-top: 0.75rem;">
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                            <span style="font-size: 0.875rem;">생일 선물 카드</span>
                                            <span style="font-size: 0.875rem; font-weight: 500;">₩50,000</span>
                                        </div>
                                        <div style="display: flex; justify-content: space-between;">
                                            <span style="font-size: 0.875rem;">이벤트 카드</span>
                                            <span style="font-size: 0.875rem; font-weight: 500;">₩30,000</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Notification Screen -->
                    <div id="notification-screen" class="screen">
                        <div class="reschedule-header">
                            <button class="back-button" onclick="showScreen('home-screen')">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="15 18 9 12 15 6"></polyline>
                                </svg>
                            </button>
                            <h2>알림</h2>
                        </div>

                        <div style="padding: 1rem;">
                            <!-- Today's Notifications -->
                            <div class="section-title">오늘</div>
                            
                            <div style="background: var(--white); border-radius: var(--border-radius); margin-bottom: 1rem; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                                <div style="padding: 1rem; border-left: 4px solid var(--primary-gold);">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <div style="background: var(--soft-gold); padding: 0.5rem; border-radius: 50%; flex-shrink: 0;">
                                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" />
                                            </svg>
                                        </div>
                                        <div style="flex: 1;">
                                            <h3 style="font-size: 0.938rem; margin-bottom: 0.25rem;">플래티넘 승급까지 500 포인트!</h3>
                                            <p style="font-size: 0.875rem; color: #666; margin-bottom: 0.25rem;">다음 시술 예약시 추가 포인트를 획득하세요</p>
                                            <span style="font-size: 0.75rem; color: #999;">2시간 전</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div style="background: var(--white); border-radius: var(--border-radius); margin-bottom: 1rem; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                                <div style="padding: 1rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <div style="background: #E3F2FD; padding: 0.5rem; border-radius: 50%; flex-shrink: 0;">
                                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="#2196F3" stroke-width="2">
                                                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                                <line x1="16" y1="2" x2="16" y2="6"></line>
                                                <line x1="8" y1="2" x2="8" y2="6"></line>
                                                <line x1="3" y1="10" x2="21" y2="10"></line>
                                            </svg>
                                        </div>
                                        <div style="flex: 1;">
                                            <h3 style="font-size: 0.938rem; margin-bottom: 0.25rem;">예약 리마인더</h3>
                                            <p style="font-size: 0.875rem; color: #666; margin-bottom: 0.25rem;">내일 오후 3시 보톡스 세션 2 예약이 있습니다</p>
                                            <span style="font-size: 0.75rem; color: #999;">5시간 전</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Yesterday's Notifications -->
                            <div class="section-title">어제</div>
                            
                            <div style="background: var(--white); border-radius: var(--border-radius); margin-bottom: 1rem; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                                <div style="padding: 1rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <div style="background: #FFF3E0; padding: 0.5rem; border-radius: 50%; flex-shrink: 0;">
                                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="#FF9800" stroke-width="2">
                                                <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                                            </svg>
                                        </div>
                                        <div style="flex: 1;">
                                            <h3 style="font-size: 0.938rem; margin-bottom: 0.25rem;">특별 할인 혜택!</h3>
                                            <p style="font-size: 0.875rem; color: #666; margin-bottom: 0.25rem;">이번 주 금요일까지 하이드라 페이셜 20% 할인</p>
                                            <span style="font-size: 0.75rem; color: #999;">1일 전</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div style="background: var(--white); border-radius: var(--border-radius); margin-bottom: 1rem; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                                <div style="padding: 1rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <div style="background: #E8F5E9; padding: 0.5rem; border-radius: 50%; flex-shrink: 0;">
                                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="#4CAF50" stroke-width="2">
                                                <path d="M20 6L9 17l-5-5"></path>
                                            </svg>
                                        </div>
                                        <div style="flex: 1;">
                                            <h3 style="font-size: 0.938rem; margin-bottom: 0.25rem;">시술 완료</h3>
                                            <p style="font-size: 0.875rem; color: #666; margin-bottom: 0.25rem;">하이드라 페이셜 시술이 성공적으로 완료되었습니다</p>
                                            <span style="font-size: 0.75rem; color: #999;">1일 전</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- This Week's Notifications -->
                            <div class="section-title">이번 주</div>
                            
                            <div style="background: var(--white); border-radius: var(--border-radius); margin-bottom: 1rem; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                                <div style="padding: 1rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <div style="background: #F3E5F5; padding: 0.5rem; border-radius: 50%; flex-shrink: 0;">
                                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="#9C27B0" stroke-width="2">
                                                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                                            </svg>
                                        </div>
                                        <div style="flex: 1;">
                                            <h3 style="font-size: 0.938rem; margin-bottom: 0.25rem;">새로운 시술 추천</h3>
                                            <p style="font-size: 0.875rem; color: #666; margin-bottom: 0.25rem;">고객님의 피부 타입에 맞는 K-글래스 스킨을 추천드립니다</p>
                                            <span style="font-size: 0.75rem; color: #999;">3일 전</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Referral Detail Screen -->
                    <div id="referral-detail-screen" class="screen">
                        <div class="screen-header">
                            <button class="back-button" onclick="showScreen('rewards-screen')">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="15 18 9 12 15 6"></polyline>
                                </svg>
                            </button>
                            <h2>친구 초대 프로그램</h2>
                        </div>
                        
                        <div class="screen-content">
                            <div style="background: var(--soft-gold); border-radius: 16px; padding: 1.5rem; margin: 1rem 0; text-align: center;">
                                <h3 style="margin: 0 0 0.75rem 0; color: var(--dark-gray);">내 초대 코드</h3>
                                <div style="font-size: 1.75rem; font-weight: bold; letter-spacing: 3px; color: var(--primary-gold); margin-bottom: 1rem;">KBEAUTY2025</div>
                                <button onclick="copyReferralCode();" style="background: var(--primary-gold); color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 8px; font-weight: 500; cursor: pointer;">
                                    코드 복사하기
                                </button>
                            </div>
                            
                            <div class="detail-section">
                                <h3>초대 방법</h3>
                                <ol style="padding-left: 1.5rem; color: #666; line-height: 1.8;">
                                    <li>친구에게 초대 코드를 공유하세요</li>
                                    <li>친구가 회원가입 시 코드를 입력합니다</li>
                                    <li>친구가 첫 예약을 완료하면</li>
                                    <li>둘 다 500 포인트를 받습니다!</li>
                                </ol>
                            </div>
                            
                            <div class="detail-section">
                                <h3>초대 현황</h3>
                                <div style="background: #f5f5f5; border-radius: 12px; padding: 1rem;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.75rem 0; border-bottom: 1px solid #e0e0e0;">
                                        <div>
                                            <div style="font-weight: 500;">김미영</div>
                                            <div style="font-size: 0.813rem; color: #666;">2025.07.15 가입</div>
                                        </div>
                                        <span style="color: #4CAF50; font-weight: 500;">완료 (+500P)</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.75rem 0; border-bottom: 1px solid #e0e0e0;">
                                        <div>
                                            <div style="font-weight: 500;">이지은</div>
                                            <div style="font-size: 0.813rem; color: #666;">2025.06.20 가입</div>
                                        </div>
                                        <span style="color: #4CAF50; font-weight: 500;">완료 (+500P)</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.75rem 0;">
                                        <div>
                                            <div style="font-weight: 500;">박서준</div>
                                            <div style="font-size: 0.813rem; color: #666;">2025.05.10 가입</div>
                                        </div>
                                        <span style="color: #4CAF50; font-weight: 500;">완료 (+500P)</span>
                                    </div>
                                </div>
                                
                                <div style="background: #f0f4ff; border-radius: 12px; padding: 1rem; margin-top: 1rem; text-align: center;">
                                    <div style="font-size: 2rem; font-weight: bold; color: var(--primary-gold);">1,500</div>
                                    <div style="color: #666; font-size: 0.875rem;">총 획득 포인트</div>
                                </div>
                            </div>
                            
                            <div style="position: fixed; bottom: calc(var(--nav-height) + 1rem); left: 1rem; right: 1rem; display: flex; gap: 0.75rem;">
                                <button onclick="shareReferralCode();" style="flex: 1; background: var(--primary-gold); color: white; border: none; padding: 1rem; border-radius: 12px; font-weight: 500; cursor: pointer;">
                                    친구에게 공유하기
                                </button>
                            </div>
                        </div>
                    </div>
                </main>

                <!-- Reschedule Screen -->
                <div id="reschedule-screen" class="screen">
                    <div class="reschedule-header">
                        <button class="back-button" onclick="hideRescheduleScreen()">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <h2>예약 일정 변경</h2>
                    </div>
                    
                    <div class="reschedule-content">
                        <div class="detail-section">
                            <h3>현재 예약 정보</h3>
                            <div class="current-appointment-info">
                                <div class="detail-row">
                                    <span class="detail-label">서비스</span>
                                    <span class="detail-value" id="reschedule-service">보톡스 주사</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-label">날짜</span>
                                    <span class="detail-value" id="reschedule-current-date">2025년 7월 28일</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-label">시간</span>
                                    <span class="detail-value" id="reschedule-current-time">오후 2:00</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="detail-section">
                            <h3>새로운 날짜 선택</h3>
                            <div class="calendar-container">
                                <div class="calendar-month-nav">
                                    <button class="month-nav-btn" onclick="changeMonth(-1)">
                                        <svg class="icon icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <polyline points="15 18 9 12 15 6"></polyline>
                                        </svg>
                                    </button>
                                    <h4 id="current-month">2025년 7월</h4>
                                    <button class="month-nav-btn" onclick="changeMonth(1)">
                                        <svg class="icon icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <polyline points="9 18 15 12 9 6"></polyline>
                                        </svg>
                                    </button>
                                </div>
                                <div class="calendar-header">
                                    <div class="calendar-day weekend">일</div>
                                    <div class="calendar-day">월</div>
                                    <div class="calendar-day">화</div>
                                    <div class="calendar-day">수</div>
                                    <div class="calendar-day">목</div>
                                    <div class="calendar-day">금</div>
                                    <div class="calendar-day weekend">토</div>
                                </div>
                                <div class="date-grid" id="date-grid">
                                    <!-- Date items will be dynamically generated -->
                                </div>
                            </div>
                        </div>
                        
                        <div class="detail-section" id="time-section" style="display: none;">
                            <h3>시간 선택</h3>
                            <div class="time-slots" id="time-slots">
                                <!-- Time slots will be dynamically generated -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="reschedule-fixed-bottom">
                        <button class="btn btn-primary btn-full" id="confirm-reschedule-btn" onclick="confirmReschedule()" disabled>일정 변경 확인</button>
                    </div>
                </div>

                <!-- Bottom Navigation -->
                <nav class="bottom-nav">
                    <div class="nav-item active" onclick="showScreen('home-screen')">
                        <div class="nav-icon">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                                <polyline points="9 22 9 12 15 12 15 22"></polyline>
                            </svg>
                        </div>
                        <div class="nav-label">홈</div>
                    </div>
                    <div class="nav-item" onclick="showScreen('treatments-screen')">
                        <div class="nav-icon">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
                            </svg>
                        </div>
                        <div class="nav-label">트리트먼트</div>
                    </div>
                    <div class="nav-item" onclick="showScreen('appointments-screen')">
                        <div class="nav-icon">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                <line x1="16" y1="2" x2="16" y2="6"></line>
                                <line x1="8" y1="2" x2="8" y2="6"></line>
                                <line x1="3" y1="10" x2="21" y2="10"></line>
                            </svg>
                        </div>
                        <div class="nav-label">예약</div>
                    </div>
                    <div class="nav-item" onclick="showScreen('rewards-screen')">
                        <div class="nav-icon">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20 12 20 22 4 22 4 12"></polyline>
                                <rect x="2" y="7" width="20" height="5"></rect>
                                <line x1="12" y1="22" x2="12" y2="7"></line>
                                <path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"></path>
                                <path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"></path>
                            </svg>
                        </div>
                        <div class="nav-label">리워드</div>
                    </div>
                    <div class="nav-item" onclick="showScreen('profile-screen')">
                        <div class="nav-icon">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                        </div>
                        <div class="nav-label">프로필</div>
                    </div>
                </nav>

                <!-- Floating Chat Button -->
                <div class="fab-chat" onclick="showScreen('chat-screen')">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                    </svg>
                </div>
            </div>
        </div>
    </div>

    <!-- Language Selector Modal -->
    <div id="language-modal" class="modal">
        <div class="modal-content">
            <h2>언어 선택</h2>
            <div class="language-options">
                <button class="language-option" onclick="selectLanguage('en')" data-lang="en">English</button>
                <button class="language-option" onclick="selectLanguage('vi')" data-lang="vi">Tiếng Việt</button>
                <button class="language-option selected" onclick="selectLanguage('ko')" data-lang="ko">한국어</button>
            </div>
        </div>
    </div>

    <script>
        // State Management
        let currentScreen = 'home-screen';
        let currentLanguage = 'ko'; // Korean as native language

        // Translations
        const translations = {
            en: {
                welcome: 'Welcome back, Sarah!',
                yourJourney: 'Your beauty journey continues',
                goldMember: 'Gold Member',
                points: 'Points',
                pointsToNext: '500 points to Platinum',
                exclusiveOffers: 'Exclusive Offers For You',
                bookNow: 'Book Now',
                learnMore: 'Learn More',
                quickActions: 'Quick Actions',
                bookAppointment: 'Book Appointment',
                myRewards: 'My Rewards',
                ourServices: 'Our Services',
                nextAppointment: 'Next Appointment',
                tomorrow: 'Tomorrow, 3:00 PM',
                followup: 'Follow-up Consultation',
                memberSince: 'Member since 2023',
                home: 'Home',
                rewards: 'Rewards',
                appointments: 'Appointments',
                treatments: 'Treatments',
                profile: 'Profile'
            },
            vi: {
                welcome: 'Chào mừng trở lại, Sarah!',
                yourJourney: 'Hành trình làm đẹp của bạn tiếp tục',
                goldMember: 'Thành viên Vàng',
                points: 'Điểm',
                pointsToNext: '500 điểm nữa lên Bạch kim',
                exclusiveOffers: 'Ưu đãi độc quyền cho bạn',
                bookNow: 'Đặt ngay',
                learnMore: 'Tìm hiểu thêm',
                quickActions: 'Thao tác nhanh',
                bookAppointment: 'Đặt lịch hẹn',
                myRewards: 'Phần thưởng',
                ourServices: 'Dịch vụ',
                nextAppointment: 'Lịch hẹn tiếp theo',
                tomorrow: 'Ngày mai, 3:00 CH',
                followup: 'Tư vấn theo dõi',
                memberSince: 'Thành viên từ 2023',
                home: 'Trang chủ',
                rewards: 'Phần thưởng',
                appointments: 'Lịch hẹn',
                treatments: 'Điều trị',
                profile: 'Hồ sơ'
            },
            ko: {
                welcome: '다시 오신 것을 환영합니다, Sarah님!',
                yourJourney: '당신의 뷰티 여정이 계속됩니다',
                goldMember: '골드 회원',
                points: '포인트',
                pointsToNext: '플래티넘까지 500 포인트',
                exclusiveOffers: '당신만을 위한 스페셜 혜택',
                bookNow: '지금 예약',
                learnMore: '자세히 알아보기',
                quickActions: '빠른 작업',
                bookAppointment: '예약하기',
                myRewards: '나의 리워드',
                ourServices: '서비스',
                nextAppointment: '다음 예약',
                tomorrow: '내일, 오후 3:00',
                followup: '보톡스 세션 2',
                memberSince: '2023년부터 회원',
                home: '홈',
                rewards: '리워드',
                appointments: '예약',
                treatments: '트리트먼트',
                profile: '프로필'
            }
        };

        // Screen Navigation
        function showScreen(screenId) {
            // Hide all screens
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            // Show selected screen
            document.getElementById(screenId).classList.add('active');
            
            // Update nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Find and activate corresponding nav item
            const navItems = document.querySelectorAll('.nav-item');
            const screenMap = ['home-screen', 'treatments-screen', 'appointments-screen', 'rewards-screen', 'profile-screen'];
            const index = screenMap.indexOf(screenId);
            if (index !== -1) {
                navItems[index].classList.add('active');
            }
            
            // Hide/show floating chat button
            const fabChat = document.querySelector('.fab-chat');
            const screensToHideChat = ['chat-screen', 'reschedule-screen', 'treatment-detail-screen', 'notification-screen'];
            if (screensToHideChat.includes(screenId)) {
                fabChat.classList.add('hidden');
            } else {
                fabChat.classList.remove('hidden');
            }
            
            currentScreen = screenId;
        }

        // Treatment Detail
        function showTreatmentDetail(treatmentId) {
            showScreen('treatment-detail-screen');
            
            // Store current treatment for booking
            window.currentTreatmentId = treatmentId;
            
            // Update content based on treatment
            const treatments = {
                hydrafacial: {
                    title: '하이드라 페이셜',
                    description: '최신 기술을 활용한 딥 클렌징과 수분 공급으로 빛나는 피부를 만들어드립니다.',
                    image: 'https://images.unsplash.com/photo-1555820585-c5ae44394b79?w=390&h=250&fit=crop',
                    duration: '60분',
                    price: '₩200,000'
                },
                glowtherapy: {
                    title: '글로우 테라피',
                    description: '피부 속부터 빛나는 광채를 만들어주는 프리미엄 글로우 테라피입니다.',
                    image: 'https://images.unsplash.com/photo-1522337360788-8b13dee7a37e?w=390&h=250&fit=crop',
                    duration: '50분',
                    price: '₩180,000'
                },
                skinresurfacing: {
                    title: '스킨 리서페이싱',
                    description: '레이저를 이용한 피부 재생 시술로 매끄럽고 탄력있는 피부를 만들어드립니다.',
                    image: 'https://images.unsplash.com/photo-1629909613957-be38c48fbbe4?w=390&h=250&fit=crop',
                    duration: '40분',
                    price: '₩380,000'
                },
                lifting: {
                    title: '리프팅 시술',
                    description: '최첨단 기술로 얼굴 윤곽을 개선하고 탄력을 되찾아드립니다.',
                    image: 'https://images.unsplash.com/photo-1619451334792-150fd785ee74?w=390&h=250&fit=crop',
                    duration: '60분',
                    price: '₩600,000'
                },
                laserhair: {
                    title: '레이저 제모',
                    description: '최신 레이저 기술로 안전하고 효과적인 영구 제모를 제공합니다. 통증을 최소화하며 매끄러운 피부를 선사합니다.',
                    image: 'https://images.unsplash.com/photo-1519415510236-718bdfcd89c8?w=390&h=250&fit=crop',
                    duration: '15-90분',
                    price: '₩150,000부터'
                },
                botox: {
                    title: '보톡스 주사',
                    description: '표정 주름을 개선하고 젊어 보이는 피부를 만들어드립니다.',
                    image: 'https://images.unsplash.com/photo-1619451334792-150fd785ee74?w=390&h=250&fit=crop',
                    duration: '30분',
                    price: '₩400,000'
                },
                filler: {
                    title: '필러 시술',
                    description: '얼굴 볼륨을 채워 입체감 있고 젊은 얼굴을 만들어드립니다.',
                    image: 'https://images.unsplash.com/photo-1664447972862-e26efc5b709f?w=390&h=250&fit=crop',
                    duration: '45분',
                    price: '₩350,000'
                },
                bodycontouring: {
                    title: '바디 컨투어링',
                    description: '최신 기술로 몸매를 개선하고 탄력있는 바디라인을 만들어드립니다.',
                    image: 'https://images.unsplash.com/photo-1544161515-4ab6ce6db874?w=390&h=250&fit=crop',
                    duration: '90분',
                    price: '₩300,000'
                },
                kglassskin: {
                    title: 'K-글래스 스킨',
                    description: '한국의 최신 피부 관리 기술로 유리처럼 맑고 투명한 피부를 만들어드립니다.',
                    image: 'https://images.unsplash.com/photo-1616394584738-fc6e612e71b9?w=390&h=250&fit=crop',
                    duration: '75분',
                    price: '₩280,000'
                }
            };
            
            const treatment = treatments[treatmentId] || treatments.hydrafacial;
            document.getElementById('treatment-detail-title').textContent = treatment.title;
            document.getElementById('treatment-detail-description').textContent = treatment.description;
            document.getElementById('treatment-detail-image').src = treatment.image;
            document.getElementById('treatment-detail-duration').textContent = treatment.duration;
            document.getElementById('treatment-detail-price').textContent = treatment.price;
        }

        // Appointment Detail
        function showAppointmentDetail(appointmentId) {
            showScreen('appointment-detail-screen');
            
            // Update detail content based on appointment
            if (appointmentId === 'tomorrow') {
                document.getElementById('detail-date').textContent = '내일, 오후 3:00';
                document.getElementById('detail-service').textContent = '후속 상담';
                document.getElementById('detail-doctor').textContent = '김민정 박사';
                document.getElementById('detail-location').textContent = '302호, 3층';
            } else if (appointmentId === 'botox2') {
                document.getElementById('detail-date').textContent = '내일, 오후 3:00';
                document.getElementById('detail-service').textContent = '보톡스 세션 2';
                document.getElementById('detail-doctor').textContent = '이수현 박사';
                document.getElementById('detail-location').textContent = '501호, 5층';
                document.getElementById('detail-duration').textContent = '45분';
                document.getElementById('detail-price').textContent = '₩350,000';
                document.getElementById('detail-notes').textContent = '2차 보톡스 시술입니다. 이마와 눈가 주름 개선을 위한 추가 시술이 진행됩니다.';
            }
        }

        // Reschedule Functions
        let selectedDate = null;
        let selectedTime = null;
        let currentViewDate = new Date();

        function showRescheduleScreen(appointmentId) {
            showScreen('reschedule-screen');
            
            // Update current appointment details
            if (appointmentId === 'tomorrow') {
                document.getElementById('reschedule-service').textContent = '보톡스 주사';
                document.getElementById('reschedule-current-date').textContent = '2025년 7월 28일';
                document.getElementById('reschedule-current-time').textContent = '오후 2:00';
            } else if (appointmentId === 'aug15') {
                document.getElementById('reschedule-service').textContent = '하이드라 페이셜';
                document.getElementById('reschedule-current-date').textContent = '2025년 8월 15일';
                document.getElementById('reschedule-current-time').textContent = '오전 10:00';
            }
            
            // Generate date options
            generateDateOptions();
        }

        function hideRescheduleScreen() {
            showScreen('appointments-screen');
            selectedDate = null;
            selectedTime = null;
            document.getElementById('time-section').style.display = 'none';
            document.getElementById('confirm-reschedule-btn').disabled = true;
        }

        function generateDateOptions() {
            const dateGrid = document.getElementById('date-grid');
            dateGrid.innerHTML = '';
            
            const year = currentViewDate.getFullYear();
            const month = currentViewDate.getMonth();
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            // Update month display
            const monthNames = ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'];
            document.getElementById('current-month').textContent = `${year}년 ${monthNames[month]}`;
            
            // Get first day of month and number of days
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            
            // Add empty cells for days before month starts
            for (let i = 0; i < firstDay; i++) {
                const emptyDiv = document.createElement('div');
                emptyDiv.className = 'date-item-empty';
                dateGrid.appendChild(emptyDiv);
            }
            
            // Add days of the month
            for (let day = 1; day <= daysInMonth; day++) {
                const date = new Date(year, month, day);
                const dateItem = document.createElement('div');
                dateItem.className = 'date-item';
                
                // Check if it's today
                if (date.toDateString() === today.toDateString()) {
                    dateItem.classList.add('today');
                }
                
                // Disable past dates and weekends
                if (date < today || date.getDay() === 0 || date.getDay() === 6) {
                    dateItem.classList.add('disabled');
                } else {
                    dateItem.onclick = () => selectDate(date, dateItem);
                }
                
                dateItem.innerHTML = `
                    <div class="date-number">${day}</div>
                `;
                
                dateGrid.appendChild(dateItem);
            }
        }

        function changeMonth(direction) {
            currentViewDate.setMonth(currentViewDate.getMonth() + direction);
            generateDateOptions();
        }

        function selectDate(date, element) {
            // Clear previous selection
            document.querySelectorAll('.date-item').forEach(item => {
                item.classList.remove('selected');
            });
            
            element.classList.add('selected');
            selectedDate = date;
            
            // Show time slots
            document.getElementById('time-section').style.display = 'block';
            generateTimeSlots();
        }

        function generateTimeSlots() {
            const timeSlots = document.getElementById('time-slots');
            timeSlots.innerHTML = '';
            
            const slots = ['09:00', '10:00', '11:00', '14:00', '15:00', '16:00', '17:00'];
            const unavailable = ['11:00', '15:00']; // Sample unavailable times
            
            slots.forEach(time => {
                const slot = document.createElement('div');
                slot.className = 'time-slot';
                slot.textContent = time;
                
                if (unavailable.includes(time)) {
                    slot.classList.add('disabled');
                    slot.textContent += ' (예약됨)';
                } else {
                    slot.onclick = () => selectTime(time, slot);
                }
                
                timeSlots.appendChild(slot);
            });
        }

        function selectTime(time, element) {
            // Clear previous selection
            document.querySelectorAll('.time-slot').forEach(slot => {
                slot.classList.remove('selected');
            });
            
            element.classList.add('selected');
            selectedTime = time;
            
            // Enable confirm button
            document.getElementById('confirm-reschedule-btn').disabled = false;
        }

        function confirmReschedule() {
            if (selectedDate && selectedTime) {
                const dateStr = `${selectedDate.getFullYear()}년 ${selectedDate.getMonth() + 1}월 ${selectedDate.getDate()}일`;
                alert(`예약이 ${dateStr} ${selectedTime}로 변경되었습니다.`);
                hideRescheduleScreen();
            }
        }

        // Language Functions
        function showLanguageModal() {
            // Update selected state based on current language
            document.querySelectorAll('.language-option').forEach(option => {
                option.classList.remove('selected');
                if (option.getAttribute('data-lang') === currentLanguage) {
                    option.classList.add('selected');
                }
            });
            
            document.getElementById('language-modal').classList.add('active');
        }

        function hideLanguageModal() {
            document.getElementById('language-modal').classList.remove('active');
        }

        function selectLanguage(lang) {
            currentLanguage = lang;
            updateLanguage();
            
            // Update selected language in modal
            document.querySelectorAll('.language-option').forEach(option => {
                option.classList.remove('selected');
                if (option.getAttribute('data-lang') === lang) {
                    option.classList.add('selected');
                }
            });
            
            // Close the modal immediately after selection
            hideLanguageModal();
        }

        function updateLanguage() {
            const t = translations[currentLanguage];
            
            // Update texts
            document.getElementById('welcome-text').textContent = t.welcome;
            document.getElementById('journey-text').textContent = t.yourJourney;
            document.getElementById('gold-member-text').textContent = t.goldMember;
            document.getElementById('points-text').textContent = t.points;
            document.getElementById('points-to-next').textContent = t.pointsToNext;
            document.getElementById('exclusive-offers').textContent = t.exclusiveOffers;
            document.getElementById('book-now-btn').textContent = t.bookNow;
            document.getElementById('learn-more-btn').textContent = t.learnMore;
            document.getElementById('next-appointment-label').textContent = t.nextAppointment;
            document.getElementById('tomorrow-text').textContent = t.tomorrow;
            document.getElementById('followup-text').textContent = t.followup;
            
            // Update navigation labels
            const navLabels = document.querySelectorAll('.nav-label');
            const navKeys = ['home', 'treatments', 'appointments', 'rewards', 'profile'];
            navLabels.forEach((label, index) => {
                label.textContent = t[navKeys[index]];
            });
        }

        // Appointment Tabs
        function showAppointmentTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            if (tab === 'upcoming') {
                document.getElementById('upcoming-appointments').style.display = 'block';
                document.getElementById('history-appointments').style.display = 'none';
                document.querySelectorAll('.tab-btn')[0].classList.add('active');
            } else {
                document.getElementById('upcoming-appointments').style.display = 'none';
                document.getElementById('history-appointments').style.display = 'block';
                document.querySelectorAll('.tab-btn')[1].classList.add('active');
            }
        }

        // Treatment Filters
        function filterTreatments(category) {
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            const cards = document.querySelectorAll('.treatment-card');
            cards.forEach(card => {
                if (category === 'all' || card.dataset.category === category) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        function sortTreatments() {
            // Placeholder for sort functionality
            alert('정렬 기능이 곧 추가됩니다!');
        }

        // Chat Functions

        function sendQuickReply(text) {
            addUserMessage(text);
            
            // Simulate AI response based on quick reply
            setTimeout(() => {
                if (text === '포인트 확인') {
                    addBotMessage("현재 골드 회원으로 2,500 포인트를 보유하고 계십니다. 플래티넘 등급까지 500 포인트 남았습니다!");
                } else if (text === '상담원 연결') {
                    addBotMessage("상담원을 연결해 드리겠습니다. 잠시만 기다려 주세요...", true);
                } else {
                    addBotMessage(text + "에 대해 도와드리겠습니다. 구체적으로 어떤 정보를 원하시나요?");
                }
            }, 1000);
        }

        function addUserMessage(text) {
            const messagesContainer = document.getElementById('chat-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message message-user';
            messageDiv.innerHTML = `
                <div class="message-bubble">${text}</div>
            `;
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function addBotMessage(text, isHandoff = false) {
            const messagesContainer = document.getElementById('chat-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message message-bot';
            
            if (isHandoff) {
                messageDiv.innerHTML = `
                    <div class="chat-avatar" style="width: 30px; height: 30px;">
                        <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                    </div>
                    <div>
                        <div class="message-bubble">${text}</div>
                        <div style="margin-top: 0.5rem; font-size: 0.875rem; color: #666;">뷰티 컨설턴트 - Kim</div>
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="chat-avatar" style="width: 30px; height: 30px;">
                        <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="11" width="18" height="10" rx="2" ry="2"></rect>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                        </svg>
                    </div>
                    <div>
                        <div class="message-bubble">${text}</div>
                    </div>
                `;
            }
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // Chat Functions
        function sendMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            
            if (message) {
                displayMessage(message, false);
                input.value = '';
                
                // Simulate AI response after a short delay
                setTimeout(() => {
                    const responses = [
                        '네, 이해했습니다. 어떤 시술에 대해 더 알고 싶으신가요?',
                        '좋은 질문이네요! 자세한 정보를 알려드리겠습니다.',
                        '고객님께 가장 적합한 시술을 추천해드리겠습니다.',
                        '예약을 도와드릴까요? 원하시는 날짜를 말씀해주세요.'
                    ];
                    const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                    displayMessage(randomResponse, true);
                }, 1000);
            }
        }

        function openCamera() {
            // Simulate camera functionality
            alert('카메라 기능이 곧 추가될 예정입니다!');
        }

        function showBookingScreen(serviceId = null) {
            showScreen('booking-screen');
            
            // Pre-select service if provided
            if (serviceId) {
                const serviceSelect = document.getElementById('service-select');
                serviceSelect.value = serviceId;
                updateServiceInfo();
            }
            
            generateBookingCalendar();
        }

        // Booking Screen Functions
        let selectedBookingDate = null;
        let selectedBookingTime = null;
        let currentBookingViewDate = new Date();

        function changeMonthBooking(direction) {
            currentBookingViewDate.setMonth(currentBookingViewDate.getMonth() + direction);
            generateBookingCalendar();
        }

        function generateBookingCalendar() {
            const dateGrid = document.getElementById('booking-date-grid');
            dateGrid.innerHTML = '';
            
            const year = currentBookingViewDate.getFullYear();
            const month = currentBookingViewDate.getMonth();
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            // Update month display
            const monthNames = ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'];
            document.getElementById('booking-current-month').textContent = `${year}년 ${monthNames[month]}`;
            
            // Get first day of month and number of days
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            
            // Add empty cells for days before month starts
            for (let i = 0; i < firstDay; i++) {
                const emptyDiv = document.createElement('div');
                emptyDiv.className = 'date-item-empty';
                dateGrid.appendChild(emptyDiv);
            }
            
            // Add days of the month
            for (let day = 1; day <= daysInMonth; day++) {
                const date = new Date(year, month, day);
                const dateItem = document.createElement('div');
                dateItem.className = 'date-item';
                
                // Check if it's today
                if (date.toDateString() === today.toDateString()) {
                    dateItem.classList.add('today');
                }
                
                // Check if past date
                if (date < today) {
                    dateItem.classList.add('disabled');
                } else {
                    dateItem.classList.add('available');
                    dateItem.onclick = () => selectBookingDate(date);
                }
                
                // Check if selected
                if (selectedBookingDate && date.toDateString() === selectedBookingDate.toDateString()) {
                    dateItem.classList.add('selected');
                }
                
                dateItem.textContent = day;
                dateGrid.appendChild(dateItem);
            }
        }

        function selectBookingDate(date) {
            selectedBookingDate = date;
            generateBookingCalendar();
            
            // Show time section
            document.getElementById('booking-time-section').style.display = 'block';
            generateBookingTimeSlots();
            
            // Scroll to time section
            document.getElementById('booking-time-section').scrollIntoView({ behavior: 'smooth' });
        }

        function generateBookingTimeSlots() {
            const timeSlotsContainer = document.getElementById('booking-time-slots');
            timeSlotsContainer.innerHTML = '';
            
            const times = ['09:00', '10:00', '11:00', '13:00', '14:00', '15:00', '16:00', '17:00'];
            
            times.forEach(time => {
                const timeSlot = document.createElement('div');
                timeSlot.className = 'time-slot';
                timeSlot.textContent = time;
                
                // Randomly make some slots unavailable
                if (Math.random() > 0.7) {
                    timeSlot.classList.add('disabled');
                } else {
                    timeSlot.onclick = () => selectBookingTime(time);
                    if (selectedBookingTime === time) {
                        timeSlot.classList.add('selected');
                    }
                }
                
                timeSlotsContainer.appendChild(timeSlot);
            });
        }

        function selectBookingTime(time) {
            selectedBookingTime = time;
            generateBookingTimeSlots();
            
            // Enable confirm button
            document.getElementById('confirm-booking-btn').disabled = false;
        }

        function updateServiceInfo() {
            const select = document.getElementById('service-select');
            if (select.value) {
                // Reset date and time selection when service changes
                selectedBookingDate = null;
                selectedBookingTime = null;
                document.getElementById('booking-time-section').style.display = 'none';
                document.getElementById('confirm-booking-btn').disabled = true;
                generateBookingCalendar();
            }
        }

        function confirmBooking() {
            const service = document.getElementById('service-select').value;
            if (service && selectedBookingDate && selectedBookingTime) {
                const monthNames = ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'];
                const dateStr = `${selectedBookingDate.getFullYear()}년 ${monthNames[selectedBookingDate.getMonth()]} ${selectedBookingDate.getDate()}일`;
                
                // Show confirmation message with better UX
                const serviceText = document.getElementById('service-select').options[document.getElementById('service-select').selectedIndex].text;
                
                // Create custom confirmation modal
                const confirmModal = document.createElement('div');
                confirmModal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: rgba(0,0,0,0.5);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 9999;
                `;
                
                confirmModal.innerHTML = `
                    <div style="background: white; border-radius: 16px; padding: 2rem; max-width: 350px; width: 90%; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.2);">
                        <svg style="width: 60px; height: 60px; color: #4CAF50; margin-bottom: 1rem;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                            <polyline points="22 4 12 14.01 9 11.01"></polyline>
                        </svg>
                        <h2 style="margin: 0 0 1rem 0; color: #333;">예약이 확정되었습니다!</h2>
                        <div style="text-align: left; background: #f5f5f5; border-radius: 8px; padding: 1rem; margin-bottom: 1.5rem;">
                            <p style="margin: 0 0 0.5rem 0;"><strong>서비스:</strong> ${serviceText}</p>
                            <p style="margin: 0 0 0.5rem 0;"><strong>날짊:</strong> ${dateStr}</p>
                            <p style="margin: 0;"><strong>시간:</strong> ${selectedBookingTime}</p>
                        </div>
                        <p style="color: #666; font-size: 0.875rem; margin-bottom: 1.5rem;">예약 내역은 '예약' 메뉴에서 확인하실 수 있습니다.</p>
                        <button onclick="document.body.removeChild(this.closest('div').parentElement); showScreen('home-screen');" style="background: var(--primary-gold); color: white; border: none; padding: 0.75rem 2rem; border-radius: 8px; font-size: 1rem; cursor: pointer; width: 100%;">확인</button>
                    </div>
                `;
                
                document.body.appendChild(confirmModal);
                
                // Reset booking data
                selectedBookingDate = null;
                selectedBookingTime = null;
                document.getElementById('service-select').value = '';
            }
        }

        // Benefits Screen Functions
        function showCurrentBenefitsScreen() {
            showScreen('current-benefits-screen');
        }
        
        function showNextTierBenefitsScreen() {
            showScreen('next-tier-benefits-screen');
        }
        
        function showReferralScreen() {
            // Navigate to referral detail screen
            showScreen('referral-detail-screen');
        }
        
        // New referral functions
        function copyReferralCode() {
            const code = 'KBEAUTY2025';
            if (navigator.clipboard) {
                navigator.clipboard.writeText(code).then(() => {
                    // Show success message
                    const button = event.target;
                    const originalText = button.textContent;
                    button.textContent = '복사됨!';
                    button.style.background = '#4CAF50';
                    setTimeout(() => {
                        button.textContent = originalText;
                        button.style.background = 'rgba(255,255,255,0.25)';
                    }, 2000);
                });
            } else {
                // Fallback for older browsers
                alert('초대 코드: KBEAUTY2025\n\n코드가 복사되었습니다!');
            }
        }
        
        function shareReferralCode() {
            const shareData = {
                title: 'K-Beauty Aesthetics 초대',
                text: '저와 함께 K-Beauty Aesthetics에서 아름다워지세요! 제 초대 코드로 가입하시면 500 포인트를 받으실 수 있습니다.',
                url: 'https://kbeauty.com/refer/KBEAUTY2025'
            };
            
            if (navigator.share) {
                navigator.share(shareData).catch(() => {
                    // User cancelled share
                });
            } else {
                // Fallback - show share options
                alert('공유 링크가 복사되었습니다!\n\nhttps://kbeauty.com/refer/KBEAUTY2025');
            }
        }
        
        // Removed showReferralDetailScreen function - now using referral-detail-screen
        
        // Payment Methods Functions
        function showPaymentMethodsScreen() {
            showScreen('payment-methods-screen');
        }
        
        function selectCurrency(currency) {
            // Remove active class from all buttons
            const buttons = document.querySelectorAll('.currency-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            
            // Add active class to clicked button
            event.target.closest('.currency-btn').classList.add('active');
            
            // Update display currency (in real app, this would update all prices)
            alert(`결제 통화가 ${currency}로 변경되었습니다.`);
        }
        
        // Event Listeners

        // Modal close on outside click
        document.getElementById('language-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                hideLanguageModal();
            }
        });

        // Chat input Enter key listener
        document.getElementById('chat-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // Initialize
        updateLanguage(); // Apply Korean language on load
    </script>
</body>
</html>